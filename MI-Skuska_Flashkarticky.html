<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Medic√≠nska informatika - Kartiƒçky</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f8f9fa;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            user-select: text;
        }

        /* MENU STYLES */
        .menu-container {
            text-align: center;
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            max-width: 600px;
            width: 90%;
            margin-top: 50px;
            border-top: 5px solid #f1c40f; /* ≈Ωlt√° farba z prezent√°cie */
        }
        
        .menu-title {
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 2rem;
        }

        .menu-btn {
            display: block;
            width: 100%;
            padding: 20px;
            margin: 15px 0;
            font-size: 1.2rem;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s, background 0.2s;
            font-weight: bold;
            color: white;
        }

        .btn-learn { background-color: #3498db; }
        .btn-test { background-color: #9b59b6; }
        .btn-exam { background-color: #e67e22; }
        
        .menu-btn:hover { transform: translateY(-3px); opacity: 0.9; }
        .menu-btn:active { transform: scale(0.98); }

        /* GAME STYLES */
        .game-area {
            display: none;
            flex-direction: column;
            align-items: center;
            width: 100%;
        }

        .stats {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            font-size: 1.2rem;
            background: white;
            padding: 15px 30px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .stat-box {
            font-weight: bold;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-label { font-size: 0.8rem; color: #777; font-weight: normal; }
        .stat-value { font-size: 1.5rem; }

        .remaining { color: #3498db; }
        .correct { color: #2ecc71; }
        .incorrect { color: #e74c3c; }

        .card-container {
            perspective: 1000px;
            width: 900px;
            max-width: 95%;
            height: 500px;
            position: relative;
            margin-bottom: 30px;
        }

        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            border-radius: 15px;
            background-color: white;
        }

        .card.flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            padding: 40px;
            box-sizing: border-box;
            text-align: center;
            overflow-y: auto;
        }

        .card-front {
            background-color: #fff;
            color: #2c3e50;
        }

        .card-back {
            background-color: #fffef0; /* Jemne ≈ælt√© pozadie pre odpoveƒè */
            color: #2c3e50;
            transform: rotateY(180deg);
            border: 2px solid #f1c40f;
        }

        h3 { color: #555; margin-top: 0; margin-bottom: 15px; width: 100%; border-bottom: 1px solid #eee; padding-bottom: 10px; }
        
        .answer-text { 
            text-align: left; 
            line-height: 1.6; 
            font-size: 1.1rem;
            width: 100%;
        }

        ul { text-align: left; padding-left: 20px; }
        li { margin-bottom: 8px; }

        .controls {
            height: 60px;
            display: flex;
            gap: 20px;
            justify-content: center;
            align-items: center;
        }

        .btn-control {
            padding: 15px 40px;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.1s, opacity 0.2s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            display: none; 
            color: white;
        }
        .btn-control:active { transform: scale(0.96); }
        .btn-correct { background-color: #2ecc71; }
        .btn-incorrect { background-color: #e74c3c; }

        .btn-menu {
            display: inline-block; 
            background: #7f8c8d; 
            color:white; 
            margin-top:30px; 
            padding: 15px 30px; 
            border:none; 
            border-radius:8px; 
            font-size:1.1rem; 
            cursor:pointer;
        }

        strong { color: #d35400; }

        .mode-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #e1e1e1;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            color: #555;
            font-weight: bold;
        }

        /* --- HAMBURGER MENU & SIDEBAR --- */
        .hamburger-btn {
            position: fixed;
            top: 15px;
            left: 20px;
            z-index: 2000;
            background: #2c3e50;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transition: background 0.3s;
        }
        .hamburger-btn:hover { background: #34495e; }

        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            width: 320px;
            height: 100vh;
            background: white;
            z-index: 1999;
            box-shadow: 2px 0 15px rgba(0,0,0,0.2);
            transform: translateX(-100%);
            transition: transform 0.3s ease-in-out;
            overflow-y: auto;
            padding-top: 70px;
            padding-bottom: 30px;
        }

        .sidebar.active {
            transform: translateX(0);
        }

        .sidebar-category {
            background: #f0f2f5;
            padding: 10px 20px;
            font-weight: bold;
            color: #2c3e50;
            border-bottom: 1px solid #ddd;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 5px;
        }

        .sidebar-item {
            display: block;
            padding: 10px 20px;
            color: #555;
            text-decoration: none;
            border-bottom: 1px solid #eee;
            font-size: 0.9rem;
            cursor: pointer;
            transition: background 0.2s, padding-left 0.2s;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .sidebar-item:hover {
            background: #fff8dc;
            padding-left: 25px;
            color: #d35400;
        }

        .sidebar-item-id {
            font-weight: bold;
            color: #999;
            margin-right: 8px;
            font-size: 0.8rem;
        }

        /* --- MODAL WINDOW --- */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 3000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(3px);
        }

        .modal-content {
            background: white;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            border-radius: 15px;
            padding: 30px;
            position: relative;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #f0f2f5;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 2rem;
            color: #aaa;
            cursor: pointer;
            padding: 0 10px;
            line-height: 1;
        }
        .modal-close:hover { color: #e74c3c; }

        .modal-q-text { font-size: 1.1rem; color: #2c3e50; margin-bottom: 20px; font-weight: 500; }
        .modal-a-text { background: #fffef0; padding: 20px; border-left: 5px solid #f1c40f; border-radius: 5px; }

        /* --- NAVIGATION GRID STYLES --- */
        .nav-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
            margin-bottom: 20px;
            max-width: 950px;
            padding: 10px;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .nav-item {
            width: 35px;
            height: 35px;
            border: 1px solid #d1d5db;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border-radius: 5px;
            font-size: 0.9rem;
            font-weight: 600;
            color: #555;
            transition: all 0.2s;
        }

        .nav-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-color: #3498db;
        }

        .nav-item.active {
            border: 2px solid #2c3e50;
            transform: scale(1.1);
            z-index: 10;
        }

        .nav-item.correct { background-color: #2ecc71; color: white; border-color: #27ae60; }
        .nav-item.incorrect { background-color: #e74c3c; color: white; border-color: #c0392b; }
    </style>
</head>
<body>

    <!-- HAMBURGER BUTTON -->
    <button class="hamburger-btn" onclick="toggleSidebar()">‚ò∞ Menu</button>

    <!-- SIDEBAR MENU -->
    <div class="sidebar" id="sidebar">
        <!-- Javascript sem vygeneruje obsah -->
    </div>

    <!-- MODAL WINDOW -->
    <div class="modal-overlay" id="modal-overlay" onclick="closeModal(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2 style="margin:0; color:#3498db;">Detail ot√°zky <span id="modal-id"></span></h2>
                <button class="modal-close" onclick="closeModalDirect()">√ó</button>
            </div>
            <div class="modal-q-text" id="modal-question"></div>
            <div><strong>Odpoveƒè:</strong></div>
            <div class="modal-a-text" id="modal-answer"></div>
        </div>
    </div>

    <!-- HLAVN√â MENU -->
    <div class="menu-container" id="main-menu">
        <h1 class="menu-title">Medic√≠nska informatika</h1>
        <button class="menu-btn btn-learn" onclick="startLearning()">üìö V≈°etky ot√°zky (Uƒçenie)</button>
        <button class="menu-btn btn-test" onclick="startTest()">üé≤ N√°hodn√Ω TEST (1 ot. z ka≈æd√©ho okruhu)</button>
        <button class="menu-btn btn-exam" onclick="startExam()">üéì Simul√°cia SK√ö≈†KY (20 ot.)</button>
        
        <p style="color:#777; margin-top:20px; font-size:0.9rem;">
            Obsahuje ot√°zky zo v≈°etk√Ωch predn√°≈°ok (IS v zdravotn√≠ctve, eHealth, Legislat√≠va, Bezpeƒçnos≈•, ≈†tandardy, EBM, Telemedic√≠na).
        </p>
    </div>

    <!-- HERN√Å PLOCHA -->
    <div class="game-area" id="game-area">
        <div class="mode-badge" id="mode-indicator"></div>
        <!-- NAVIGAƒåN√Å MRIE≈ΩKA -->
        <div class="nav-grid" id="nav-grid"></div>
        
        <div class="stats">
            <div class="stat-box">
                <span class="stat-value remaining" id="count-remaining">0</span>
                <span class="stat-label">Zost√°va</span>
            </div>
            <div class="stat-box">
                <span class="stat-value correct" id="count-correct">0</span>
                <span class="stat-label">Spr√°vne</span>
            </div>
            <div class="stat-box">
                <span class="stat-value incorrect" id="count-incorrect">0</span>
                <span class="stat-label">Nespr√°vne</span>
            </div>
        </div>

        <div class="card-container" id="card-container">
            <div class="card" id="flashcard">
                <div class="card-face card-front">
                    <h3>Ot√°zka <span id="q-num"></span></h3>
                    <div id="q-text" class="answer-text" style="text-align: center;"></div>
                </div>
                <div class="card-face card-back">
                    <h3>Odpoveƒè</h3>
                    <div id="a-text" class="answer-text"></div>
                </div>
            </div>
        </div>

        <div class="controls" id="controls">
            <button id="btn-incorrect" class="btn-control btn-incorrect" onclick="handleAnswer(false)">Neviem</button>
            <button id="btn-correct" class="btn-control btn-correct" onclick="handleAnswer(true)">Viem</button>
        </div>
    </div>

    <script>
        // --- DATA (QUESTIONS FROM LECTURES) ---
        const questions = [
            // --- KATEG√ìRIA 1: √övod a IS v zdravotn√≠ctve (L1) ---
            { id: 1, q: "ƒåo je to <strong>Medic√≠nska informatika</strong>?", a: "Discipl√≠na zaoberaj√∫ca sa systematick√Ωm spracovan√≠m √∫dajov, inform√°ci√≠ a poznatkov v medic√≠ne a zdravotnej starostlivosti." },
            { id: 2, q: "Ak√© s√∫ hlavn√© <strong>√∫lohy</strong> medic√≠nskej informatiky?", a: "<ul><li>Prispievanie ku skvalitneniu medic√≠ny a zdravia jednotlivca.</li><li>Skvalitnenie medic√≠nskych a zdravotn√≠ckych poznatkov.</li><li>Prispievanie k dobre organizovanej zdravotnej starostlivosti.</li></ul>" },
            { id: 3, q: "Vymenujte hlavn√© typy <strong>informaƒçn√Ωch syst√©mov</strong> v zdravotn√≠ctve.", a: "<ul><li>NIS (Nemocniƒçn√© informaƒçn√© syst√©my)</li><li>LIS (Laborat√≥rne informaƒçn√© syst√©my)</li><li>AIS (Ambulantn√© informaƒçn√© syst√©my)</li><li>RIS/PACS (R√°diologick√© syst√©my)</li><li>MIS (Mana≈æ√©rske informaƒçn√© syst√©my)</li></ul>" },
            { id: 4, q: "ƒåo je √∫lohou <strong>Nemocniƒçn√©ho informaƒçn√©ho syst√©mu (NIS)</strong>?", a: "Sl√∫≈æi na zber, uchov√°vanie, spracovanie a prenos inform√°ci√≠ v nemocniciach. Reflektuje organizaƒçn√∫ ≈°trukt√∫ru, podporuje administrat√≠vu, lek√°rsku starostlivos≈• (chorobopisy), starostlivos≈• sestier a mana≈æment." },
            { id: 5, q: "Uveƒète pr√≠klady konkr√©tnych <strong>NIS</strong> pou≈æ√≠van√Ωch na Slovensku (podƒæa predn√°≈°ky).", a: "Doctus, LCS ELECTRONICS (Komplexn√Ω NIS), PCS*CARE, PROMIS, StaproMEDEA." },
            { id: 6, q: "ƒåo zabezpeƒçuj√∫ <strong>Laborat√≥rne informaƒçn√© syst√©my (LIS)</strong>?", a: "Komplexn√∫ spr√°vu laborat√≥ri√≠ (bioch√©mia, hematol√≥gia atƒè.). Umo≈æ≈àuj√∫ priamu komunik√°ciu s analyz√°tormi (odstra≈àuj√∫ riziko ch√Ωb pri prepise) a prepojenie s NIS." },
            { id: 7, q: "ƒåo je to <strong>PACS</strong>?", a: "<strong>Picture Archiving and Communication System</strong> (Obrazov√Ω archivaƒçn√Ω a komunikaƒçn√Ω syst√©m). Sl√∫≈æi na ukladanie, archiv√°ciu a distrib√∫ciu digit√°lnych medic√≠nskych obrazov (RTG, CT, MR) a komunik√°ciu cez ≈°tandard DICOM." },
            { id: 8, q: "Ak√Ω je rozdiel medzi <strong>Monolitickou</strong> a <strong>Klient-Server</strong> architekt√∫rou?", a: "<strong>Monolitick√°:</strong> Jedna unifikovan√°, samostatn√° aplik√°cia. ≈§a≈æko sa men√≠, ak√°koƒævek zmena vy≈æaduje nasadenie cel√©ho syst√©mu.<br><strong>Klient-Server:</strong> Rozdelenie na klienta (UI, ≈æiada o slu≈æby) a server (logika, d√°ta, odpoved√°). Umo≈æ≈àuje lep≈°iu ≈°k√°lovateƒænos≈• a centralizovan√© riadenie." },
            { id: 9, q: "Ak√© s√∫ v√Ωhody a nev√Ωhody <strong>Monolitickej architekt√∫ry</strong>?", a: "<strong>V√Ωhody:</strong> Jednoduch≈°√≠ v√Ωvoj a nasadenie na zaƒçiatku, jednoduch≈°ie testovanie.<br><strong>Nev√Ωhody:</strong> Pomal≈°√≠ v√Ωvoj pri raste, vysok√© prepojenie k√≥du (ned√° sa oddeli≈•), probl√©my s v√Ωkonom a flexibilitou." },
            { id: 10, q: "ƒåo je to <strong>AIS</strong> (Ambulantn√Ω informaƒçn√Ω syst√©m)?", a: "Syst√©m pre vedenie agendy ambulancie (evidencia pacientov, karty, recepty, v√Ωkony pre pois≈•ovne). M√¥≈æe by≈• s√∫ƒças≈•ou NIS alebo samostatn√Ω softv√©r (napr. WinAmbulancia, MediCom)." },

            // --- KATEG√ìRIA 2: eHealth (L1 - druh√° ƒças≈•) ---
            { id: 11, q: "Definujte <strong>eHealth</strong> (Elektronick√© zdravotn√≠ctvo).", a: "Oblas≈• na prieseƒçn√≠ku informatiky, zdravotn√≠ctva a obchodu. Znamen√° pou≈æ√≠vanie IKT na naplnenie potrieb pacientov, zdravotn√≠kov a tvorcov politiky (zlep≈°enie kvality, efekt√≠vnosti, dostupnosti)." },
            { id: 12, q: "Ak√© s√∫ hlavn√© <strong>princ√≠py budovania eHealth</strong>?", a: "Jednoduchos≈•, D√¥veryhodnos≈•, Flexibilita, Otvorenos≈•, Bezpeƒçnos≈•, Z√°konnos≈•." },
            { id: 13, q: "ƒåo je to <strong>N√°rodn√Ω zdravotn√Ω port√°l (NZP)</strong>?", a: "Jednotn√° vstupn√° br√°na pre slu≈æby eHealth. Poskytuje inform√°cie obƒçanom (zdravie, prevencia), pacientom (lieky, v√Ωkony), lek√°rom (legislat√≠va) a in≈°tit√∫ci√°m." },
            { id: 14, q: "ƒåo je to slu≈æba <strong>eAlok√°cia</strong>?", a: "Slu≈æba pre mana≈æment ƒçasu a zdrojov. Zah≈ï≈àa eObjedn√°vanie (≈°etr√≠ ƒças v ƒçak√°rni), eKalend√°r, eOƒçkovanie, eƒåakacia listina." },
            { id: 15, q: "Ak√© s√∫ v√Ωhody <strong>eMedik√°cie a ePreskripcie</strong>?", a: "Zn√≠≈æenie rizika ch√Ωb (interakcie liekov), odstr√°nenie neƒçitateƒæn√Ωch receptov, kontrola duplic√≠t, prehƒæad o spotrebe liekov, nemo≈ænos≈• fal≈°ovania receptov." },
            { id: 16, q: "ƒåo je to <strong>EZKO</strong> (Elektronick√° zdravotn√° kni≈æka obƒçana)?", a: "S√∫bor zdravotn√Ωch z√°znamov obƒçana v elektronickej podobe (oƒçkovania, lieƒçba, laborat√≥rne v√Ωsledky, prep√∫≈°≈•acie spr√°vy). Umo≈æ≈àuje zdieƒæanie √∫dajov medzi lek√°rmi (zabr√°nenie duplicitn√Ωm vy≈°etreniam)." },
            { id: 17, q: "ƒåo je projekt <strong>epSOS</strong>?", a: "European Patients Smart Open Service. Projekt E√ö zameran√Ω na cezhraniƒçn√∫ interoperabilitu (zdieƒæanie pacientskych sum√°rov a e-receptov medzi krajinami E√ö)." },
            { id: 18, q: "Ak√© s√∫ 3 √∫rovne interoperability v projekte epSOS?", a: "1. Organizaƒçn√° (identifik√°cia), 2. S√©mantick√° (preklad konceptov), 3. Technick√° (infra≈°trukt√∫ra, bezpeƒçnos≈•)." },
            { id: 19, q: "Ak√© s√∫ z√°kladn√© slu≈æby <strong>EZKO</strong>?", a: "Mana≈æment s√∫hlasov, z√°pis od poskytovateƒæov (PZS), z√°pis od pois≈•ovn√≠, poskytovanie inform√°ci√≠ pacientovi (pacientsky sum√°r, medikaƒçn√° hist√≥ria)." },
            
            // --- KATEG√ìRIA 3: EHR a Legislat√≠va (L3) ---
            { id: 20, q: "Ak√Ω je rozdiel medzi <strong>EHR</strong> (Electronic Health Record) a <strong>EPR</strong> (Electronic Patient Record)?", a: "<strong>EHR:</strong> Celo≈æivotn√Ω z√°znam (od narodenia po smr≈•), prierezov√Ω, interoperabiln√Ω medzi in≈°tit√∫ciami.<br><strong>EPR:</strong> Z√°znam z jednej in≈°tit√∫cie (napr. nemocnice), ƒçasovo a miestne ≈°pecifick√Ω." },
            { id: 21, q: "Kto m√¥≈æe nahliada≈• do zdravotnej dokument√°cie (podƒæa z√°kona)?", a: "Pacient, z√°konn√Ω z√°stupca, splnomocnen√° osoba, rev√≠zny lek√°r pois≈•ovne, √örad pre dohƒæad (√öDZS), s√∫dny znalec, posudkov√Ω lek√°r." },
            { id: 22, q: "Ako dlho sa mus√≠ archivova≈• zdravotn√° dokument√°cia?", a: "<strong>20 rokov</strong> po smrti pacienta (v≈°eobecn√Ω lek√°r) alebo 20 rokov od posledn√©ho poskytnutia starostlivosti (≈°pecialisti)." },
            { id: 23, q: "Ak√© s√∫ podmienky pre vedenie dokument√°cie <strong>v√Ωluƒçne v elektronickej forme</strong>?", a: "Mus√≠ by≈• podp√≠san√° zaruƒçen√Ωm elektronick√Ωm podpisom (ZEP), musia sa robi≈• denn√© z√°lohy a roƒçn√© arch√≠vne k√≥pie (nezmeniteƒæn√©)." },
            { id: 24, q: "Ktor√Ω z√°kon upravuje vedenie zdravotnej dokument√°cie na Slovensku?", a: "Z√°kon ƒç. 576/2004 Z.z. o zdravotnej starostlivosti." },
            { id: 25, q: "M√¥≈æe pacient odmietnu≈• z√°pis do zdravotnej dokument√°cie?", a: "<strong>Nie.</strong> √ödaje s√∫ spracov√°van√© na z√°klade z√°kona. Pacient v≈°ak mus√≠ by≈• o spracovan√≠ pouƒçen√Ω." },
            { id: 26, q: "ƒåo je to <strong>GDPR</strong> v kontexte zdravotn√≠ctva?", a: "Nariadenie o ochrane osobn√Ωch √∫dajov. Zdravotn√© √∫daje s√∫ citliv√© √∫daje. Nemocnice musia ma≈• zodpovedn√∫ osobu (DPO). Pr√°vo na v√Ωmaz sa na zdravotn√∫ dokument√°ciu nevz≈•ahuje (kv√¥li z√°konnej archiv√°cii)." },
            { id: 27, q: "ƒåo obsahuje v√Ωpis zo zdravotnej dokument√°cie?", a: "Chronologick√Ω opis v√Ωvoja zdravotn√©ho stavu, prehƒæad o doteraj≈°ej lieƒçbe, √∫daje potrebn√© na ƒèal≈°iu starostlivos≈•, d√°tum a identifik√°ciu lek√°ra." },

            // --- KATEG√ìRIA 4: Bezpeƒçnos≈• a Podpis (L4) ---
            { id: 28, q: "Ak√© s√∫ dva hlavn√© typy ≈°ifrovac√≠ch algoritmov?", a: "<strong>Symetrick√©:</strong> Jeden kƒæ√∫ƒç na ≈°ifrovanie aj de≈°ifrovanie (DES, AES). R√Ωchlej≈°ie.<br><strong>Asymetrick√©:</strong> P√°r kƒæ√∫ƒçov - verejn√Ω (≈°ifrovanie) a s√∫kromn√Ω (de≈°ifrovanie). (RSA, DSA). Bezpeƒçnej≈°ia distrib√∫cia kƒæ√∫ƒçov." },
            { id: 29, q: "Definujte <strong>Elektronick√Ω podpis</strong> a ƒço zaruƒçuje.", a: "Elektronick√© identifikaƒçn√© √∫daje pripojen√© k dokumentu. Zaruƒçuje:<br>1. <strong>Autentifik√°ciu</strong> (toto≈ænos≈• autora)<br>2. <strong>Integritu</strong> (dokument nebol zmenen√Ω)<br>3. <strong>Nepopierateƒænos≈•</strong> (autor nem√¥≈æe poprie≈• podpis)." },
            { id: 30, q: "ƒåo je to <strong>Zaruƒçen√Ω (kvalifikovan√Ω) elektronick√Ω podpis</strong>?", a: "Podpis vyhotoven√Ω pomocou bezpeƒçn√©ho zariadenia a kvalifikovan√©ho certifik√°tu od certifikaƒçnej autority. M√° pr√°vnu v√°hu vlastnoruƒçn√©ho podpisu." },
            { id: 31, q: "ƒåo je to <strong>PKI</strong> (Public Key Infrastructure)?", a: "Infra≈°trukt√∫ra verejn√©ho kƒæ√∫ƒça. Syst√©m certifikaƒçn√Ωch autor√≠t (CA), ktor√Ω vyd√°va a spravuje digit√°lne certifik√°ty, ƒç√≠m prep√°ja verejn√© kƒæ√∫ƒçe s identitou os√¥b." },
            { id: 32, q: "Ako funguje <strong>Hash funkcia</strong> pri podpise?", a: "Vytvor√≠ z dokumentu unik√°tny re≈•azec fixnej dƒ∫≈æky (odtlaƒçok). Tento hash sa za≈°ifruje s√∫kromn√Ωm kƒæ√∫ƒçom autora (vznikne podpis). Pr√≠jemca de≈°ifruje podpis verejn√Ωm kƒæ√∫ƒçom a porovn√° hash." },
            { id: 33, q: "Vymenujte typy symetrick√Ωch algoritmov.", a: "DES, 3DES, AES, Blowfish, RC4." },
            { id: 34, q: "ƒåo je to <strong>ORM</strong> (Object-Relational Mapping) a jeho v√Ωhody?", a: "Technika mapovania datab√°zov√Ωch tabuliek na objekty v aplik√°cii. V√Ωhody: R√Ωchlej≈°√≠ v√Ωvoj, bezpeƒçnos≈• (br√°ni SQL injection), menej p√≠sania k√≥du." },

            // --- KATEG√ìRIA 5: ≈†tandardy (L5) ---
            { id: 35, q: "Preƒço s√∫ potrebn√© <strong>≈°tandardy</strong> v zdravotn√≠ctve?", a: "Na zabezpeƒçenie kompatibility (interoperability) r√¥znych syst√©mov, v√Ωmenu √∫dajov, bezpeƒçnos≈• a jednotn√∫ interpret√°ciu d√°t." },
            { id: 36, q: "ƒåo je to <strong>HL7</strong> (Health Level Seven)?", a: "Skupina ≈°tandardov pre v√Ωmenu, spr√°vu a integr√°ciu textov√Ωch klinick√Ωch a administrat√≠vnych √∫dajov. Verzia 3 vyu≈æ√≠va RIM (Reference Information Model) a XML." },
            { id: 37, q: "ƒåo je to <strong>DICOM</strong>?", a: "Digital Image and Communications in Medicine. ≈†tandard pre sn√≠manie, ukladanie a prenos medic√≠nskych obrazov (RTG, CT). Definuje form√°t s√∫boru (hlaviƒçka s d√°tami + obraz) a komunikaƒçn√Ω protokol." },
            { id: 38, q: "Ak√© s√∫ typy ≈°tandardov v medic√≠nskej informatike?", a: "D√°tov√© prvky, ƒå√≠seln√≠ky (MKCH), Registre, V√Ωmena inform√°ci√≠ (HL7, DICOM), Bezpeƒçnos≈•, Riadenie ≈æivotn√©ho cyklu." },
            { id: 39, q: "Vysvetlite <strong>OTP</strong> (One Time Password).", a: "Jednorazov√© heslo platn√© len pre jedno prihl√°senie alebo kr√°tky ƒças. Zvy≈°uje bezpeƒçnos≈• (odoln√© voƒçi odpozorovaniu)." },
            { id: 40, q: "ƒåo je to <strong>JWT</strong> (JSON Web Token)?", a: "Kompaktn√Ω sp√¥sob prenosu inform√°ci√≠ medzi stranami ako JSON objekt. ƒåasto sa pou≈æ√≠va na autentifik√°ciu v modern√Ωch webov√Ωch aplik√°ci√°ch (token-based auth)." },

            // --- KATEG√ìRIA 6: Terminol√≥gia a Ontol√≥gie (L6) ---
            { id: 41, q: "Ak√Ω je rozdiel medzi <strong>Terminol√≥giou</strong> a <strong>Ontol√≥giou</strong>?", a: "<strong>Terminol√≥gia:</strong> S√∫bor term√≠nov (slov), defin√≠cie s√∫ v ƒæudskej reƒçi, voƒænej≈°ie vz≈•ahy.<br><strong>Ontol√≥gia:</strong> Form√°lna reprezent√°cia pojmov a vz≈•ahov, zalo≈æen√° na logike, strojovo spracovateƒæn√°, definuje axi√≥my a obmedzenia." },
            { id: 42, q: "ƒåo je to <strong>SNOMED CT</strong>?", a: "Systematized Nomenclature of Medicine - Clinical Terms. Najkomplexnej≈°ia klinick√° terminol√≥gia na svete. Hierarchick√°, multiaxi√°lna, umo≈æ≈àuje presn√© k√≥dovanie klinick√Ωch inform√°ci√≠." },
            { id: 43, q: "ƒåo je to <strong>MKCH</strong> (ICD)?", a: "Medzin√°rodn√° klasifik√°cia chor√¥b. ≈†tandardn√Ω diagnostick√Ω n√°stroj pre epidemiol√≥giu a mana≈æment zdravia (k√≥dy diagn√≥z, napr. J00-J99)." },
            { id: 44, q: "ƒåo je to <strong>MeSH</strong>?", a: "Medical Subject Headings. Tezaurus (riaden√Ω slovn√≠k) pou≈æ√≠van√Ω na indexovanie a vyhƒæad√°vanie v biomedic√≠nskej literat√∫re (napr. v datab√°ze MEDLINE/PubMed)." },
            { id: 45, q: "ƒåo je to <strong>UMLS</strong>?", a: "Unified Medical Language System. Metatezaurus, ktor√Ω prep√°ja r√¥zne biomedic√≠nske slovn√≠ky a klasifik√°cie (SNOMED, MKCH, MeSH) a umo≈æ≈àuje preklad medzi nimi." },
            { id: 46, q: "ƒåo je to <strong>S√©mantick√° interoperabilita</strong>?", a: "Schopnos≈• syst√©mov vymie≈àa≈• si inform√°cie tak, aby pr√≠jemca spr√°vne pochopil ich <strong>v√Ωznam</strong> (nielen syntax). Vy≈æaduje spoloƒçn√© terminol√≥gie a ontol√≥gie." },
            { id: 47, q: "Ak√© s√∫ √∫rovne interoperability?", a: "0: ≈Ωiadna<br>1: Technick√° (k√°ble, protokoly)<br>2: Syntaktick√° (form√°t XML, HL7)<br>3: S√©mantick√° (v√Ωznam, kontext)." },

            // --- KATEG√ìRIA 7: EBM - Medic√≠na zalo≈æen√° na d√¥kazoch (L7) ---
            { id: 48, q: "ƒåo je to <strong>EBM</strong> (Evidence Based Medicine)?", a: "Systematick√Ω pr√≠stup k rozhodovaniu o lieƒçbe, ktor√Ω integruje:<br>1. Najlep≈°ie vedeck√© d√¥kazy<br>2. Klinick√© sk√∫senosti lek√°ra<br>3. Hodnoty a preferencie pacienta." },
            { id: 49, q: "Ak√© s√∫ kroky procesu EBM?", a: "1. Formul√°cia ot√°zky (PICO)<br>2. Vyhƒæadanie d√¥kazov<br>3. Kritick√© hodnotenie d√¥kazov (validita, v√Ωznam)<br>4. Aplik√°cia (integr√°cia) v praxi<br>5. Vyhodnotenie √∫ƒçinnosti." },
            { id: 50, q: "Vysvetlite met√≥du <strong>PICO</strong> pre tvorbu ot√°zky.", a: "<strong>P</strong> (Patient) - Kto je pacient?<br><strong>I</strong> (Intervention) - Ak√° lieƒçba/test?<br><strong>C</strong> (Comparison) - S ƒç√≠m porovn√°vame?<br><strong>O</strong> (Outcome) - Ak√Ω v√Ωsledok oƒçak√°vame?" },
            { id: 51, q: "Pop√≠≈°te <strong>hierarchiu d√¥kazov</strong> (pyram√≠du).", a: "Najvy≈°≈°ia kvalita: <strong>Systematick√© prehƒæady a Metaanal√Ωzy</strong>.<br>Stred: Randomizovan√© kontrolovan√© ≈°t√∫die (RCT), Kohortov√© ≈°t√∫die.<br>Najni≈æ≈°ia: Kazuistiky, N√°zory expertov, Laborat√≥rny v√Ωskum." },
            { id: 52, q: "ƒåo sa hodnot√≠ pri <strong>kritickom hodnoten√≠</strong> ≈°t√∫die?", a: "<strong>Validita:</strong> Bola ≈°t√∫dia vykonan√° spr√°vne? (Metodika)<br><strong>Zmysluplnos≈•:</strong> S√∫ v√Ωsledky klinicky v√Ωznamn√©? (Veƒækos≈• √∫ƒçinku)<br><strong>Relevancia:</strong> D√° sa to aplikova≈• na m√¥jho pacienta?" },

            // --- KATEG√ìRIA 8: Telemedic√≠na (L8) ---
            { id: 53, q: "ƒåo je to <strong>Telemedic√≠na</strong>?", a: "Poskytovanie zdravotn√≠ckych slu≈æieb na diaƒæku pomocou IKT, keƒè je vzdialenos≈• kritick√Ωm faktorom. Zah≈ï≈àa diagnostiku, lieƒçbu, prevenciu aj vzdel√°vanie." },
            { id: 54, q: "Ak√© s√∫ 3 z√°kladn√© princ√≠py slu≈æieb telemedic√≠ny?", a: "<strong>Hlasov√©:</strong> Konzult√°cie cez telef√≥n, linky d√¥very.<br><strong>Obrazov√©:</strong> Prenos sn√≠mok (Teler√°diol√≥gia, Telepatol√≥gia).<br><strong>D√°tov√©:</strong> Telemetria (monitoring funkci√≠), pr√≠stup k EHR." },
            { id: 55, q: "ƒåo je to <strong>Teler√°diol√≥gia</strong>?", a: "Prenos r√°diologick√Ωch sn√≠mok (RTG, CT) z miesta vzniku k ≈°pecialistovi na popis a diagn√≥zu. Vyu≈æ√≠va ≈°tandard DICOM a syst√©my PACS." },
            { id: 56, q: "ƒåo je to <strong>Telemonitorovanie</strong> (Homecare)?", a: "Sledovanie fyziologick√Ωch funkci√≠ pacienta (tlak, EKG, cukor) v dom√°com prostred√≠ pomocou senzorov. √ödaje sa posielaj√∫ lek√°rovi na vyhodnotenie." },
            { id: 57, q: "Vymenujte <strong>pr√≠nosy telemedic√≠ny</strong>.", a: "Dostupnos≈• ≈°pecialistov aj v odƒæahl√Ωch oblastiach, r√Ωchlej≈°ia diagn√≥za (konzult√°cie), zn√≠≈æenie n√°kladov na cestovanie, skr√°tenie hospitaliz√°cie (dom√°ce monitorovanie), lep≈°ia eduk√°cia." }
        ];

        const testCategories = [
            { id: 1, name: "√övod & IS v zdravotn√≠ctve", min: 1, max: 10 },
            { id: 2, name: "eHealth", min: 11, max: 19 },
            { id: 3, name: "EHR & Legislat√≠va", min: 20, max: 27 },
            { id: 4, name: "Bezpeƒçnos≈• & Podpis", min: 28, max: 34 },
            { id: 5, name: "≈†tandardy (HL7, DICOM)", min: 35, max: 40 },
            { id: 6, name: "Terminol√≥gia & Ontol√≥gie", min: 41, max: 47 },
            { id: 7, name: "EBM (Evidence Based Medicine)", min: 48, max: 52 },
            { id: 8, name: "Telemedic√≠na", min: 53, max: 57 }
        ];

        // --- LOGIC ---
           
        let sessionData = [];
        let currentSessionIndex = 0;
        let currentCard = null;
        let correctCount = 0;
        let incorrectCount = 0;
        let isFlipped = false;
        let currentMode = 'learn'; 

        // UI Elementy
        const mainMenu = document.getElementById('main-menu');
        const gameArea = document.getElementById('game-area');
        const cardElement = document.getElementById('flashcard');
        const qNumEl = document.getElementById('q-num');
        const qTextEl = document.getElementById('q-text');
        const aTextEl = document.getElementById('a-text');
        
        const countRemEl = document.getElementById('count-remaining');
        const countCorEl = document.getElementById('count-correct');
        const countIncEl = document.getElementById('count-incorrect');
        const modeIndicator = document.getElementById('mode-indicator');

        const btnCor = document.getElementById('btn-correct');
        const btnInc = document.getElementById('btn-incorrect');

        // Funkcia na n√°hodn√© premie≈°anie poƒæa
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // --- INITIALIZATION ---

        function initSession(indices, modeName) {
            currentMode = modeName;
            correctCount = 0;
            incorrectCount = 0;
            
            sessionData = indices.map(qId => ({
                qIndex: qId, // Index v poli 'questions'
                status: null 
            }));

            currentSessionIndex = 0;
            setupGameUI(modeName); 
            renderNavGrid();       
            loadCard(0);           
        }

        // --- START FUNCTIONS ---

        function startLearning() {
            // V≈°etky ot√°zky (0 a≈æ length-1)
            const indices = questions.map((_, index) => index);
            initSession(indices, "Re≈æim: V≈°etky karty");
        }

        function startTest() {
            let indices = [];
            // Z ka≈ædej kateg√≥rie vyberieme 1 n√°hodn√∫ ot√°zku
            testCategories.forEach(cat => {
                const range = cat.max - cat.min + 1;
                const randomId = Math.floor(Math.random() * range) + cat.min;
                // Prevod ID na index poƒæa questions (ID-1, lebo pole je 0-based a ID s√∫ 1-based a id√∫ zaradom)
                const qIndex = questions.findIndex(q => q.id === randomId);
                if(qIndex !== -1) indices.push(qIndex);
            });
            shuffleArray(indices);
            initSession(indices, "Re≈æim: TEST (n√°hodn√© ot√°zky)");
        }

        function startExam() {
            // Simul√°cia sk√∫≈°ky: 20 n√°hodn√Ωch ot√°zok z cel√©ho bal√≠ka
            const allIndices = questions.map((_, index) => index);
            shuffleArray(allIndices);
            const examIndices = allIndices.slice(0, 20);
            
            initSession(examIndices, "Re≈æim: SK√ö≈†KA (20 ot√°zok)");
        }

        // --- UI & GAMEPLAY ---

        function setupGameUI(modeText) {
            modeIndicator.textContent = modeText;
            
            mainMenu.style.display = 'none';
            gameArea.style.display = 'flex';
            document.querySelector('.card-container').style.display = 'block'; 
            document.getElementById('controls').style.display = 'flex';
            document.getElementById('nav-grid').style.display = 'flex';

            // Reset kontajnera ak bol prep√≠san√Ω finish()
            const container = document.querySelector('.card-container');
            if (!container.querySelector('.card')) {
                 location.reload();
            }
        }

        function renderNavGrid() {
            const grid = document.getElementById('nav-grid');
            grid.innerHTML = '';

            sessionData.forEach((item, i) => {
                const btn = document.createElement('div');
                btn.className = 'nav-item';
                btn.textContent = i + 1; 
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `nav-item-${i}`;
                grid.appendChild(btn);
            });
            updateNavGridUI();
        }

        function updateNavGridUI() {
            sessionData.forEach((item, i) => {
                const btn = document.getElementById(`nav-item-${i}`);
                if (!btn) return;

                btn.className = 'nav-item'; // Reset

                if (item.status === true) btn.classList.add('correct');
                if (item.status === false) btn.classList.add('incorrect');
                if (i === currentSessionIndex) btn.classList.add('active');
            });
        }

        function jumpToQuestion(index) {
            if (index < 0 || index >= sessionData.length) return;
            currentSessionIndex = index;
            loadCard(index);
        }

        function loadCard(index) {
            // Kontrola konca
            if (index >= sessionData.length) {
                const allCorrect = sessionData.every(i => i.status === true);
                if (allCorrect) {
                    finish();
                    return;
                } else {
                    // Ak nie je v≈°etko hotov√©, n√°jdi prv√∫ nevyrie≈°en√∫
                    const nextTodo = sessionData.findIndex(i => i.status !== true);
                    if(nextTodo !== -1) {
                        jumpToQuestion(nextTodo);
                        return;
                    } else {
                        finish(); 
                        return;
                    }
                }
            }

            isFlipped = false;
            cardElement.classList.remove('flipped');
            btnCor.style.display = 'none';
            btnInc.style.display = 'none';

            const dataItem = sessionData[index];
            currentCard = questions[dataItem.qIndex];

            qNumEl.textContent = `${currentCard.id} (Poradie: ${index + 1} / ${sessionData.length})`;
            qTextEl.innerHTML = currentCard.q;
            aTextEl.innerHTML = currentCard.a;

            updateStats();
            updateNavGridUI();
        }

        function updateStats() {
            const done = sessionData.filter(i => i.status !== null).length;
            const corr = sessionData.filter(i => i.status === true).length;
            const incorr = sessionData.filter(i => i.status === false).length;

            countRemEl.textContent = sessionData.length - done;
            countCorEl.textContent = corr;
            countIncEl.textContent = incorr;
        }

        function flipCard() {
            isFlipped = !isFlipped;
            cardElement.classList.toggle('flipped');

            if (isFlipped) {
                btnCor.style.display = 'inline-block';
                btnInc.style.display = 'inline-block';
            } else {
                btnCor.style.display = 'none';
                btnInc.style.display = 'none';
            }
        }

        cardElement.addEventListener('click', (e) => {
            if (window.getSelection().toString().length === 0) {
                 flipCard();
            }
        });

        function handleAnswer(isCorrect) {
            sessionData[currentSessionIndex].status = isCorrect;

            if (isCorrect) correctCount++;
            else incorrectCount++;

            updateNavGridUI();

            let nextIndex = currentSessionIndex + 1;
            
            if (nextIndex >= sessionData.length) {
                // Sk√∫s n√°js≈• prv√∫, ktor√° nie je zelen√°
                nextIndex = sessionData.findIndex(i => i.status !== true);
                if (nextIndex === -1) {
                    finish();
                    return;
                }
            }
            jumpToQuestion(nextIndex);
        }

        function finish() {
            let finishText = 'V≈°etky karty prejden√©.';
            if (currentMode.includes('TEST')) finishText = 'Test dokonƒçen√Ω.';
            if (currentMode.includes('SK√ö≈†KA')) finishText = 'Sk√∫≈°ka ukonƒçen√°.';

            document.getElementById('nav-grid').style.display = 'none'; 

            const container = document.querySelector('.card-container');
            container.innerHTML = `
                <div style="text-align:center; padding: 50px;">
                    <h1 style="color:#2ecc71; font-size: 3rem;">Hotovo!</h1>
                    <p style="font-size:1.2rem;">${finishText}</p>
                    <div style="margin-top: 20px; font-size: 1.1rem;">
                        Celkovo kliknut√≠: ${correctCount + incorrectCount}
                    </div>
                    <button class="btn-menu" onclick="location.reload()">N√°vrat do menu</button>
                </div>
            `;
            
            document.getElementById('controls').style.display = 'none';
            countRemEl.textContent = 0;
        }

        // --- SIDEBAR & MODAL LOGIC ---

        function initSidebar() {
            const sidebar = document.getElementById('sidebar');
            let htmlContent = '';

            testCategories.forEach((cat) => {
                htmlContent += `<div class="sidebar-category">${cat.name}</div>`;

                for (let i = cat.min; i <= cat.max; i++) {
                    const q = questions.find(q => q.id === i);
                    if (q) {
                        // Odstr√°nenie HTML tagov pre preview v menu
                        const plainText = q.q.replace(/<[^>]*>?/gm, '');
                        const shortText = plainText.length > 40 ? plainText.substring(0, 40) + '...' : plainText;

                        htmlContent += `
                            <div class="sidebar-item" onclick="openModal(${q.id})">
                                <span class="sidebar-item-id">#${q.id}</span>
                                ${shortText}
                            </div>
                        `;
                    }
                }
            });
            sidebar.innerHTML = htmlContent;
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('active');
        }

        function openModal(id) {
            const q = questions.find(q => q.id === id);
            if (!q) return;

            document.getElementById('modal-id').textContent = q.id;
            document.getElementById('modal-question').innerHTML = q.q;
            document.getElementById('modal-answer').innerHTML = q.a;

            document.getElementById('modal-overlay').style.display = 'flex';
        }

        function closeModal(event) {
            if (event.target.id === 'modal-overlay') {
                document.getElementById('modal-overlay').style.display = 'none';
            }
        }

        function closeModalDirect() {
            document.getElementById('modal-overlay').style.display = 'none';
        }

        // Inicializ√°cia
        initSidebar();
    </script>
</body>
</html>