<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anat√≥mia - Latinsk√© term√≠ny</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f2f5;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            user-select: text;
        }

        /* MENU STYLES */
        .menu-container {
            text-align: center;
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            max-width: 600px;
            width: 90%;
            margin-top: 50px;
        }
        
        .menu-title {
            color: #2c3e50;
            margin-bottom: 10px;
            font-size: 2rem;
        }

        .menu-subtitle {
            color: #7f8c8d;
            margin-bottom: 30px;
            font-size: 1rem;
        }

        .menu-btn {
            display: block;
            width: 100%;
            padding: 20px;
            margin: 15px 0;
            font-size: 1.2rem;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s, background 0.2s;
            font-weight: bold;
            color: white;
        }

        .btn-lat-sk { background-color: #3498db; }
        .btn-sk-lat { background-color: #9b59b6; }
        
        .menu-btn:hover { transform: translateY(-3px); opacity: 0.9; }
        .menu-btn:active { transform: scale(0.98); }

        /* GAME STYLES */
        .game-area {
            display: none; /* Hidden initially */
            flex-direction: column;
            align-items: center;
            width: 100%;
        }

        .stats {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            font-size: 1.2rem;
            background: white;
            padding: 15px 30px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .stat-box {
            font-weight: bold;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-label { font-size: 0.8rem; color: #777; font-weight: normal; }
        .stat-value { font-size: 1.5rem; }

        .remaining { color: #3498db; }
        .correct { color: #2ecc71; }
        .incorrect { color: #e74c3c; }

        .card-container {
            perspective: 1000px;
            width: 600px;
            max-width: 95%;
            height: 400px;
            position: relative;
            margin-bottom: 30px;
        }

        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            border-radius: 15px;
            background-color: white;
        }

        .card.flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            box-sizing: border-box;
            text-align: center;
            overflow-y: auto;
        }

        .card-front {
            background-color: #fff;
            color: #2c3e50;
        }

        .card-back {
            background-color: #fdfdfd;
            color: #2c3e50;
            transform: rotateY(180deg);
            border: 2px solid #e0e0e0;
        }

        h3 { color: #95a5a6; margin-top: 0; margin-bottom: 15px; font-size: 0.9rem; text-transform: uppercase; letter-spacing: 1px;}
        
        .card-content {
            font-size: 2rem;
            font-weight: bold;
        }

        .controls {
            height: 60px;
            display: flex;
            gap: 20px;
            justify-content: center;
            align-items: center;
        }

        .btn-control {
            padding: 15px 40px;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.1s, opacity 0.2s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            display: none; 
            color: white;
        }
        .btn-control:active { transform: scale(0.96); }
        .btn-correct { background-color: #2ecc71; }
        .btn-incorrect { background-color: #e74c3c; }

        .btn-menu {
            display: inline-block; 
            background: #7f8c8d; 
            color:white; 
            margin-top:30px; 
            padding: 15px 30px; 
            border:none; 
            border-radius:8px; 
            font-size:1.1rem; 
            cursor:pointer;
        }

        .mode-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #e1e1e1;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            color: #555;
            font-weight: bold;
        }

        /* HAMBURGER MENU & SIDEBAR */
        .hamburger-btn {
            position: fixed;
            top: 15px;
            left: 20px;
            z-index: 2000;
            background: #2c3e50;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transition: background 0.3s;
        }
        .hamburger-btn:hover { background: #34495e; }

        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            width: 320px;
            height: 100vh;
            background: white;
            z-index: 1999;
            box-shadow: 2px 0 15px rgba(0,0,0,0.2);
            transform: translateX(-100%);
            transition: transform 0.3s ease-in-out;
            overflow-y: auto;
            padding-top: 70px; 
            padding-bottom: 30px;
        }

        .sidebar.active {
            transform: translateX(0);
        }

        .sidebar-category {
            background: #f0f2f5;
            padding: 10px 20px;
            font-weight: bold;
            color: #2c3e50;
            border-bottom: 1px solid #ddd;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 5px;
        }

        .sidebar-item {
            display: block;
            padding: 10px 20px;
            color: #555;
            text-decoration: none;
            border-bottom: 1px solid #eee;
            font-size: 0.9rem;
            cursor: pointer;
            transition: background 0.2s, padding-left 0.2s;
            display: flex;
            justify-content: space-between;
        }

        .sidebar-item:hover {
            background: #eef2f7;
            padding-left: 25px;
            color: #3498db;
        }

        /* MODAL WINDOW */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 3000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(3px);
        }

        .modal-content {
            background: white;
            width: 90%;
            max-width: 500px;
            border-radius: 15px;
            padding: 30px;
            position: relative;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            text-align: center;
        }

        .modal-close {
            position: absolute;
            top: 10px;
            right: 15px;
            background: none;
            border: none;
            font-size: 2rem;
            color: #aaa;
            cursor: pointer;
        }
        .modal-close:hover { color: #e74c3c; }

        .modal-row { margin-bottom: 15px; text-align: left; }
        .modal-label { font-size: 0.8rem; color: #7f8c8d; text-transform: uppercase; }
        .modal-text { font-size: 1.2rem; font-weight: bold; color: #2c3e50; }
    </style>
</head>
<body>

    <!-- HAMBURGER BUTTON -->
    <button class="hamburger-btn" onclick="toggleSidebar()">‚ò∞ Zoznam</button>

    <!-- SIDEBAR MENU -->
    <div class="sidebar" id="sidebar">
        <!-- Javascript sem vygeneruje obsah -->
    </div>

    <!-- MODAL WINDOW -->
    <div class="modal-overlay" id="modal-overlay" onclick="closeModal(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <button class="modal-close" onclick="closeModalDirect()">√ó</button>
            <h2 style="margin-top:0; color:#3498db;">Detail pojmu</h2>
            <div class="modal-row">
                <div class="modal-label">Latinsky</div>
                <div class="modal-text" id="modal-lat"></div>
            </div>
            <div class="modal-row">
                <div class="modal-label">Slovensky</div>
                <div class="modal-text" id="modal-sk"></div>
            </div>
        </div>
    </div>

    <!-- HLAVN√â MENU -->
    <div class="menu-container" id="main-menu">
        <h1 class="menu-title">Anatomick√° Terminol√≥gia</h1>
        <div class="menu-subtitle">Z√°klady teoretickej medic√≠ny (ZS 2025/2026)</div>
        
        <button class="menu-btn btn-lat-sk" onclick="startGame('LAT_SK')">
            üáÆüáπ ‚û°Ô∏è üá∏üá∞ Latinƒçina do Slovenƒçiny
        </button>
        <button class="menu-btn btn-sk-lat" onclick="startGame('SK_LAT')">
            üá∏üá∞ ‚û°Ô∏è üáÆüáπ Slovenƒçina do Latinƒçiny
        </button>
        
        <p style="color:#777; margin-top:20px; font-size:0.9rem;">
            <strong>Princ√≠p sk√∫≈°ania:</strong><br>
            V bal√≠ƒçku s√∫ v≈°etky slov√≠ƒçka.<br>
            Ak odpoviete <strong>Nespr√°vne</strong>, kartiƒçka sa vr√°ti na koniec bal√≠ƒçka.<br>
            Hra konƒç√≠, keƒè odpoviete na v≈°etky slov√≠ƒçka spr√°vne.
        </p>
    </div>

    <!-- HERN√Å PLOCHA -->
    <div class="game-area" id="game-area">
        <div class="mode-badge" id="mode-indicator"></div>
        
        <div class="stats">
            <div class="stat-box">
                <span class="stat-value remaining" id="count-remaining">0</span>
                <span class="stat-label">V bal√≠ƒçku</span>
            </div>
            <div class="stat-box">
                <span class="stat-value correct" id="count-correct">0</span>
                <span class="stat-label">Hotovo</span>
            </div>
            <div class="stat-box">
                <span class="stat-value incorrect" id="count-incorrect">0</span>
                <span class="stat-label">Chyby</span>
            </div>
        </div>

        <div class="card-container" id="card-container">
            <div class="card" id="flashcard">
                <div class="card-face card-front">
                    <h3 id="lbl-question">Ot√°zka</h3>
                    <div class="card-content" id="q-text"></div>
                </div>
                <div class="card-face card-back">
                    <h3 id="lbl-answer">Odpoveƒè</h3>
                    <div class="card-content" id="a-text"></div>
                </div>
            </div>
        </div>

        <div class="controls" id="controls">
            <button id="btn-incorrect" class="btn-control btn-incorrect" onclick="handleAnswer(false)">Nespr√°vne</button>
            <button id="btn-correct" class="btn-control btn-correct" onclick="handleAnswer(true)">Spr√°vne</button>
        </div>
    </div>

    <script>
        // --- DATA (Extrahovan√© z PDF) ---
        const dictionary = [
            { lat: "abdomen", sk: "brucho" },
            { lat: "abduccia", sk: "odtiahnutie" },
            { lat: "adduccia", sk: "pritiahnutie" },
            { lat: "adipocyt", sk: "tukov√° bunka" },
            { lat: "alveolus", sk: "mech√∫rik, l√¥≈æko, lal√¥ƒçik" },
            { lat: "amorphous", sk: "beztvar√Ω - amorfn√Ω" },
            { lat: "antebrachium", sk: "predlaktie" },
            { lat: "anterior", sk: "predn√Ω ‚Äì smerom k bru≈°nej dutine" },
            { lat: "anus", sk: "an√°lny otvor" },
            { lat: "aorta", sk: "srdcovnica" },
            { lat: "apex", sk: "hrot" },
            { lat: "appendix", sk: "dodatok" },
            { lat: "arachnoidea", sk: "pav√∫ƒçnica" },
            { lat: "arbor vitae", sk: "strom ≈æivota" },
            { lat: "arteria", sk: "tepna" },
            { lat: "articulatio", sk: "kƒ∫b" },
            { lat: "atrium", sk: "predsie≈à" },
            { lat: "auris", sk: "ucho" },
            { lat: "brachialis", sk: "ramenn√Ω" },
            { lat: "brachium", sk: "rameno" },
            { lat: "bronchi", sk: "priedu≈°ky" },
            { lat: "capsid", sk: "kapsula (obal) - kapsida" },
            { lat: "capsula", sk: "p√∫zdro" },
            { lat: "caput", sk: "hlava" },
            { lat: "cardiovasculare", sk: "srdcovocievny - kardiovaskul√°rny" },
            { lat: "cardium", sk: "srdce" },
            { lat: "carpi, carpus", sk: "z√°p√§stie" },
            { lat: "cartilago", sk: "chrupka" },
            { lat: "cauda", sk: "chvost" },
            { lat: "cavum", sk: "dutina" },
            { lat: "cellula", sk: "bunka" },
            { lat: "cerebellum", sk: "mozoƒçek" },
            { lat: "cerebrum", sk: "mozog" },
            { lat: "cervicales", sk: "krƒçn√Ω" },
            { lat: "cervix", sk: "krk" },
            { lat: "circumduccia", sk: "kr√∫≈æenie" },
            { lat: "clavicula", sk: "kƒæ√∫ƒçna kos≈•" },
            { lat: "coccyx", sk: "kostrƒç" },
            { lat: "collum (cervix)", sk: "krk" },
            { lat: "columnae", sk: "stƒ∫pec" },
            { lat: "columna vertebralis", sk: "chrbtica" },
            { lat: "contraccio", sk: "stianutie, skr√°tenie (svalovej bunky) - kontrakcia" },
            { lat: "cor", sk: "srdce" },
            { lat: "corona", sk: "korunka" },
            { lat: "corpus", sk: "trup, telo" },
            { lat: "corpus luteum", sk: "≈ælt√© teliesko" },
            { lat: "cortex", sk: "k√¥ra" },
            { lat: "cortex cerebri", sk: "mozgov√° k√¥ra" },
            { lat: "costa", sk: "rebro" },
            { lat: "cranium", sk: "lebka" },
            { lat: "crus", sk: "predkolenie" },
            { lat: "cubitus", sk: "lake≈•" },
            { lat: "cutis", sk: "ko≈æa" },
            { lat: "dent", sk: "zub" },
            { lat: "dexter", sk: "prav√Ω" },
            { lat: "diaphragma", sk: "br√°nica" },
            { lat: "diencephalon", sk: "medzimozog" },
            { lat: "digitus", sk: "prst" },
            { lat: "dilalatio", sk: "roz≈°√≠renie, roztiahnutie (svalovej bunky)" },
            { lat: "distalis", sk: "vzdialenej≈°√≠ (od trupu) ‚Äì dist√°lny" },
            { lat: "dorsalis", sk: "zadn√Ω ‚Äì dorz√°lny" },
            { lat: "dorsum", sk: "chrb√°t" },
            { lat: "ductus", sk: "v√Ωvod" },
            { lat: "duodenum", sk: "dvan√°stnik" },
            { lat: "durum", sk: "tvrd√Ω" },
            { lat: "enamelum", sk: "sklovina" },
            { lat: "encephalon", sk: "mozog" },
            { lat: "epidermis", sk: "poko≈æka" },
            { lat: "epiglottis", sk: "pr√≠chlopka" },
            { lat: "epithalamus", sk: "nadl√¥≈æko" },
            { lat: "extensio", sk: "vystretie" },
            { lat: "externus", sk: "vonkaj≈°√≠ ‚Äì extern√Ω" },
            { lat: "facialis", sk: "tv√°rov√Ω" },
            { lat: "facies (bucca)", sk: "tv√°r" },
            { lat: "fascia", sk: "v√§zivov√° blana" },
            { lat: "femur", sk: "stehno" },
            { lat: "fibrosa", sk: "vl√°knit√Ω" },
            { lat: "fibula", sk: "ihlica" },
            { lat: "flexia", sk: "ohnutie" },
            { lat: "frontalis", sk: "ƒçelov√Ω ‚Äì front√°lny" },
            { lat: "gaster", sk: "≈æal√∫dok" },
            { lat: "genu", sk: "koleno" },
            { lat: "glandula", sk: "≈æƒæaza" },
            { lat: "glandula pinealis", sk: "≈°u≈°kovit√© teliesko - epif√Ωza" },
            { lat: "glandula pituitaria", sk: "hypof√Ωza" },
            { lat: "glandula thyroidea", sk: "≈°t√≠tna ≈æƒæaza" },
            { lat: "glomerulus", sk: "obliƒçkov√© klbko" },
            { lat: "hepar", sk: "peƒçe≈à" },
            { lat: "hilus", sk: "br√°nka, vstup, v√Ωstup ciev do org√°nu" },
            { lat: "horizontalis", sk: "vodorovn√Ω ‚Äì horizont√°lny" },
            { lat: "humerus", sk: "ramenn√° kos≈•" },
            { lat: "hypophysis", sk: "podmozgov√° ≈æƒæaza - hypof√Ωza" },
            { lat: "hypothalamus", sk: "podl√¥≈æko" },
            { lat: "choan", sk: "nosov√Ω otvor" },
            { lat: "ileum", sk: "bedrovn√≠k" },
            { lat: "inferior", sk: "doln√Ω" },
            { lat: "internus", sk: "vn√∫torn√Ω ‚Äì intern√Ω" },
            { lat: "intersticium", sk: "vmedzen√© tkanivo" },
            { lat: "interstinum", sk: "ƒçrevo" },
            { lat: "iris", sk: "d√∫hovka" },
            { lat: "jejunum", sk: "laƒçn√≠k" },
            { lat: "lacrima", sk: "slza" },
            { lat: "lamela", sk: "tenka do≈°tiƒçka, p√°sik" },
            { lat: "larynx", sk: "hrtan" },
            { lat: "lateralis", sk: "boƒçn√Ω ‚Äì later√°lny" },
            { lat: "lens", sk: "≈°o≈°ovka" },
            { lat: "ligamentum", sk: "v√§z" },
            { lat: "lingua", sk: "jazyk" },
            { lat: "liquor cerebrospinalis", sk: "mozgovomiechov√Ω mok" },
            { lat: "lobus", sk: "lalok" },
            { lat: "logos", sk: "n√°uka" },
            { lat: "longitudinalis", sk: "pozdƒ∫≈æny" },
            { lat: "longum", sk: "dlh√Ω" },
            { lat: "lumbalis", sk: "driekov√Ω" },
            { lat: "major", sk: "veƒæk√Ω" },
            { lat: "mandibula", sk: "s√°nka" },
            { lat: "manus", sk: "ruka, ruky" },
            { lat: "maxilla", sk: "ƒçelus≈•" },
            { lat: "medius", sk: "stredn√Ω" },
            { lat: "medulla", sk: "dre≈à" },
            { lat: "medulla spinalis", sk: "miecha" },
            { lat: "membrum", sk: "ƒçlen" },
            { lat: "membrum inferius", sk: "doln√° konƒçatina" },
            { lat: "membrum superius", sk: "horn√° konƒçatina" },
            { lat: "meninges", sk: "mozgov√© pleny" },
            { lat: "meniscus", sk: "kos√°kovit√Ω v√§zivov√Ω √∫tvar v kƒ∫be" },
            { lat: "mentum", sk: "brada" },
            { lat: "mesencephalon", sk: "stredn√Ω mozog" },
            { lat: "metacarpi", sk: "z√°prstie" },
            { lat: "minor", sk: "mal√Ω" },
            { lat: "morf√©", sk: "podoba, tvar" },
            { lat: "mucosa", sk: "sliznica" },
            { lat: "musculus", sk: "sval" },
            { lat: "myocardium", sk: "srdcov√Ω sval" },
            { lat: "nares", sk: "nozdry" },
            { lat: "nasale", sk: "nosn√Ω" },
            { lat: "nasopharynx", sk: "nosohltan" },
            { lat: "nasus", sk: "nos" },
            { lat: "nervi spinales", sk: "miechov√© nervy" },
            { lat: "nervus trigeminus", sk: "trojklann√Ω nerv" },
            { lat: "nervus vagus", sk: "bl√∫div√Ω nerv" },
            { lat: "neurocranium", sk: "mozgov√° ƒçast lebky" },
            { lat: "nodus", sk: "uzol" },
            { lat: "nucleus", sk: "jadro" },
            { lat: "occipitalis", sk: "z√°hlavn√Ω" },
            { lat: "oesophagus", sk: "pa≈æer√°k" },
            { lat: "oligo", sk: "m√°lo" },
            { lat: "orbita", sk: "oƒçnica" },
            { lat: "os", sk: "kos≈•" },
            { lat: "os sacrum", sk: "kr√≠≈æov√° kos≈•" },
            { lat: "osseus", sk: "kostra" },
            { lat: "ossificatio", sk: "kostnatenie" },
            { lat: "ovaria", sk: "vajeƒçn√≠ky" },
            { lat: "palatum", sk: "podnebie" },
            { lat: "palma manus", sk: "dla≈à ruky" },
            { lat: "pancreas", sk: "pod≈æal√∫dkov√° ≈æƒæaza" },
            { lat: "papilla", sk: "bradavka" },
            { lat: "pars", sk: "ƒças≈•" },
            { lat: "patella", sk: "jabƒ∫ƒçko" },
            { lat: "ped, pes", sk: "noha" },
            { lat: "pelvis", sk: "panva" },
            { lat: "perichondrium", sk: "ochrupka" },
            { lat: "peritoneum", sk: "pobru≈°nica" },
            { lat: "permeabilita", sk: "zv√Ω≈°en√° priepustnos≈•" },
            { lat: "phalances", sk: "kosti prstov" },
            { lat: "pharynx", sk: "hltan" },
            { lat: "planta pedis", sk: "chodidlo, stupaj" },
            { lat: "pleura", sk: "pohrudnica" },
            { lat: "plexus", sk: "sple≈• nervov" },
            { lat: "pons", sk: "most" },
            { lat: "posterior", sk: "zadn√Ω ‚Äì dozadu, ku chrbtu" },
            { lat: "proximalis", sk: "bli≈æ≈°√≠ (k trupu) ‚Äì proxim√°lny" },
            { lat: "pulmo", sk: "pƒæ√∫ca" },
            { lat: "pulpa", sk: "du≈æina" },
            { lat: "pyrolus", sk: "vr√°tnik v ≈æal√∫dku" },
            { lat: "radius", sk: "vretenn√° kos≈•" },
            { lat: "radix", sk: "kore≈à" },
            { lat: "rectum", sk: "koneƒçn√≠k" },
            { lat: "renalis", sk: "obliƒçkov√Ω" },
            { lat: "renes", sk: "obliƒçky" },
            { lat: "resistentia", sk: "odolnos≈•" },
            { lat: "retina", sk: "sietnica" },
            { lat: "sacralis", sk: "kr√≠≈æov√Ω" },
            { lat: "saliva", sk: "slina" },
            { lat: "sanguis", sk: "krv" },
            { lat: "scapula", sk: "lopatka" },
            { lat: "sinister", sk: "ƒæav√Ω" },
            { lat: "sinus", sk: "krvn√Ω splav, nosov√° dutina" },
            { lat: "sphincter", sk: "zvieraƒç" },
            { lat: "splachnocranium", sk: "tv√°rov√° ƒças≈• lebky" },
            { lat: "substantia alba", sk: "biela mozgov√° hmota" },
            { lat: "substantia grisea", sk: "≈°ed√° mozgov√° hmota" },
            { lat: "superfacialis", sk: "povrchov√Ω" },
            { lat: "superior", sk: "horn√Ω" },
            { lat: "syncytium", sk: "svalov√© vl√°kno" },
            { lat: "systema", sk: "s√∫stava" },
            { lat: "tarsus", sk: "priehlavok" },
            { lat: "tela fibrosa", sk: "v√§zivo" },
            { lat: "telencephalon", sk: "koncov√Ω mozog" },
            { lat: "tendo", sk: "≈°ƒæacha" },
            { lat: "tenue", sk: "tenk√Ω" },
            { lat: "testes", sk: "semenn√≠ky" },
            { lat: "thalamus", sk: "l√¥≈æko" },
            { lat: "thorax", sk: "hrudn√≠k" },
            { lat: "thymus", sk: "detsk√° ≈æƒæaza - t√Ωmus" },
            { lat: "tibia", sk: "p√≠≈°≈•ala" },
            { lat: "tonsilla", sk: "mandle" },
            { lat: "tractus", sk: "dr√°ha" },
            { lat: "trachea", sk: "priedu≈°nica" },
            { lat: "transversalis", sk: "prieƒçny ‚Äì transverz√°lny" },
            { lat: "truncus", sk: "kme≈à, trup" },
            { lat: "tubulus", sk: "trubica, kan√°lik" },
            { lat: "ulna", sk: "lak≈•ov√° kos≈•" },
            { lat: "urethra", sk: "moƒçov√° r√∫ra" },
            { lat: "uterer", sk: "moƒçovod" },
            { lat: "vas", sk: "cieva" },
            { lat: "vena", sk: "≈æila" },
            { lat: "vena portae", sk: "vr√°tnica" },
            { lat: "venter (abdomen)", sk: "brucho" },
            { lat: "ventralis", sk: "predn√Ω" },
            { lat: "ventriculum", sk: "≈æal√∫dok, komora" },
            { lat: "vertebra", sk: "stavec" },
            { lat: "verticalis", sk: "zvisl√Ω ‚Äì vertik√°lny" },
            { lat: "vesica biliaris", sk: "≈ælƒçn√≠k" },
            { lat: "vesica urinaria", sk: "moƒçov√Ω mech√∫r" },
            { lat: "villi", sk: "klky" },
            { lat: "viscerale", sk: "vn√∫torn√Ω ‚Äì √∫trobn√Ω" },
            { lat: "vomer", sk: "ƒçerieslo" }
        ];

        // --- GAME LOGIC ---

        let deck = []; // Pole indexov aktu√°lnych kariet
        let currentMode = ''; 
        let currentCardIndex = -1;
        let isFlipped = false;
        
        // Stats
        let correctCount = 0;
        let incorrectCount = 0;

        const cardElement = document.getElementById('flashcard');
        const qTextEl = document.getElementById('q-text');
        const aTextEl = document.getElementById('a-text');
        const lblQuestion = document.getElementById('lbl-question');
        const lblAnswer = document.getElementById('lbl-answer');
        const btnCor = document.getElementById('btn-correct');
        const btnInc = document.getElementById('btn-incorrect');
        
        // Shuffle array
        function shuffle(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        function startGame(mode) {
            currentMode = mode;
            correctCount = 0;
            incorrectCount = 0;
            
            // Priprav√≠me bal√≠ƒçek - indexy 0 a≈æ N
            deck = dictionary.map((_, i) => i);
            shuffle(deck);

            // UI
            document.getElementById('main-menu').style.display = 'none';
            document.getElementById('game-area').style.display = 'flex';
            
            const modeText = (mode === 'LAT_SK') 
                ? "Latinsko ‚Æï Slovensk√Ω" 
                : "Slovensko ‚Æï Latinsk√Ω";
            document.getElementById('mode-indicator').textContent = modeText;

            loadNextCard();
        }

        function loadNextCard() {
            if (deck.length === 0) {
                finishGame();
                return;
            }

            // Reset karty
            isFlipped = false;
            cardElement.classList.remove('flipped');
            btnCor.style.display = 'none';
            btnInc.style.display = 'none';

            // Naƒç√≠tame PRV√ö kartu z bal√≠ƒçka (vrch)
            currentCardIndex = deck[0]; 
            const item = dictionary[currentCardIndex];

            // Nastavenie textov podƒæa m√≥du
            if (currentMode === 'LAT_SK') {
                lblQuestion.textContent = "Latinsky";
                qTextEl.textContent = item.lat;
                lblAnswer.textContent = "Slovensky";
                aTextEl.textContent = item.sk;
            } else {
                lblQuestion.textContent = "Slovensky";
                qTextEl.textContent = item.sk;
                lblAnswer.textContent = "Latinsky";
                aTextEl.textContent = item.lat;
            }

            updateStats();
        }

        function updateStats() {
            document.getElementById('count-remaining').textContent = deck.length;
            document.getElementById('count-correct').textContent = correctCount;
            document.getElementById('count-incorrect').textContent = incorrectCount;
        }

        function flipCard() {
            isFlipped = !isFlipped;
            cardElement.classList.toggle('flipped');

            if (isFlipped) {
                btnCor.style.display = 'inline-block';
                btnInc.style.display = 'inline-block';
            } else {
                btnCor.style.display = 'none';
                btnInc.style.display = 'none';
            }
        }

        cardElement.addEventListener('click', (e) => {
            if (window.getSelection().toString().length === 0) {
                 flipCard();
            }
        });

        function handleAnswer(isCorrect) {
            // Aktu√°lna karta je deck[0]
            const currentItem = deck.shift(); // Odstr√°nime z vrchu

            if (isCorrect) {
                correctCount++;
                // U≈æ sa nevr√°ti do bal√≠ƒçka
            } else {
                incorrectCount++;
                // Vr√°time na koniec bal√≠ƒçka
                deck.push(currentItem);
            }

            updateStats();
            
            // Mal√© oneskorenie pre efekt
            if(deck.length > 0 || isCorrect) {
                // Ak bola odpoved spravna a balicek je prazdny, loadNextCard to vyriesi (finish)
                loadNextCard(); 
            } else {
                finishGame();
            }
        }

        function finishGame() {
            document.getElementById('card-container').innerHTML = `
                <div style="text-align:center; padding: 50px; background:white; border-radius:15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1);">
                    <h1 style="color:#2ecc71; font-size: 3rem; margin-bottom:10px;">Hotovo!</h1>
                    <p style="font-size:1.2rem;">V≈°etky slov√≠ƒçka √∫spe≈°ne prejden√©.</p>
                    <div style="margin-top: 20px; font-size: 1.1rem; color:#555;">
                        Celkov√Ω poƒçet ch√Ωb: <strong>${incorrectCount}</strong>
                    </div>
                    <button class="btn-menu" onclick="location.reload()">Sp√§≈• do menu</button>
                </div>
            `;
            document.getElementById('controls').style.display = 'none';
            document.getElementById('count-remaining').textContent = 0;
            document.getElementById('count-correct').textContent = dictionary.length;
        }

        // --- SIDEBAR GENERATOR ---
        function initSidebar() {
            const sidebar = document.getElementById('sidebar');
            let html = '';
            
            // Zoradenie podƒæa abecedy
            const sortedDict = [...dictionary].sort((a, b) => a.lat.localeCompare(b.lat));
            
            // Zoskupenie podƒæa prv√©ho p√≠smena
            let currentLetter = '';
            
            sortedDict.forEach((item, index) => {
                const firstChar = item.lat.charAt(0).toUpperCase();
                
                if (firstChar !== currentLetter) {
                    currentLetter = firstChar;
                    html += `<div class="sidebar-category">${currentLetter}</div>`;
                }

                html += `
                    <div class="sidebar-item" onclick="openModal(${dictionary.indexOf(item)})">
                        <span>${item.lat}</span>
                    </div>
                `;
            });
            
            sidebar.innerHTML = html;
        }

        function toggleSidebar() {
            document.getElementById('sidebar').classList.toggle('active');
        }

        function openModal(index) {
            const item = dictionary[index];
            document.getElementById('modal-lat').textContent = item.lat;
            document.getElementById('modal-sk').textContent = item.sk;
            document.getElementById('modal-overlay').style.display = 'flex';
        }

        function closeModal(e) {
            if(e.target.id === 'modal-overlay') {
                document.getElementById('modal-overlay').style.display = 'none';
            }
        }
        function closeModalDirect() {
            document.getElementById('modal-overlay').style.display = 'none';
        }

        // INIT
        initSidebar();

    </script>
</body>
</html>