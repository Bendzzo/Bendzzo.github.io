<!DOCTYPE html>
<html lang="sk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDS - Skuska karticky</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: #f0f2f5;
            display: flex;
            flex-direction: column;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px;
            user-select: text;
        }

        /* MENU STYLES */
        .menu-container {
            text-align: center;
            background: white;
            padding: 40px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            max-width: 600px;
            width: 90%;
            margin-top: 50px;
        }
        
        .menu-title {
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 2rem;
        }

        .menu-btn {
            display: block;
            width: 100%;
            padding: 20px;
            margin: 15px 0;
            font-size: 1.2rem;
            border: none;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s, background 0.2s;
            font-weight: bold;
            color: white;
        }

        .btn-learn { background-color: #3498db; }
        .btn-test { background-color: #9b59b6; }
        
        .menu-btn:hover { transform: translateY(-3px); opacity: 0.9; }
        .menu-btn:active { transform: scale(0.98); }

        /* GAME STYLES */
        .game-area {
            display: none; /* Hidden initially */
            flex-direction: column;
            align-items: center;
            width: 100%;
        }

        .stats {
            display: flex;
            gap: 20px;
            margin-bottom: 20px;
            font-size: 1.2rem;
            background: white;
            padding: 15px 30px;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .stat-box {
            font-weight: bold;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .stat-label { font-size: 0.8rem; color: #777; font-weight: normal; }
        .stat-value { font-size: 1.5rem; }

        .remaining { color: #3498db; }
        .correct { color: #2ecc71; }
        .incorrect { color: #e74c3c; }

        .card-container {
            perspective: 1000px;
            width: 900px;
            max-width: 95%;
            height: 600px;
            position: relative;
            margin-bottom: 30px;
        }

        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.6s;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
            border-radius: 15px;
            background-color: white;
        }

        .card.flipped {
            transform: rotateY(180deg);
        }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            align-items: center;
            padding: 40px;
            box-sizing: border-box;
            text-align: center;
            overflow-y: auto;
        }

        .card-front {
            background-color: #fff;
            color: #2c3e50;
        }

        .card-back {
            background-color: #fdfdfd;
            color: #2c3e50;
            transform: rotateY(180deg);
            border: 2px solid #e0e0e0;
        }

        h3 { color: #555; margin-top: 0; margin-bottom: 15px; width: 100%; }
        
        pre {
            background: #f4f4f4;
            padding: 15px;
            border-radius: 8px;
            text-align: left;
            width: 100%;
            overflow-x: auto;
            border: 1px solid #ddd;
            font-family: Consolas, monospace;
            white-space: pre-wrap;
            font-size: 0.9rem;
            user-select: text;
            margin-bottom: 10px;
        }

        .controls {
            height: 60px;
            display: flex;
            gap: 20px;
            justify-content: center;
            align-items: center;
        }

        .btn-control {
            padding: 15px 40px;
            border: none;
            border-radius: 8px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.1s, opacity 0.2s;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            display: none; 
            color: white;
        }
        .btn-control:active { transform: scale(0.96); }
        .btn-correct { background-color: #2ecc71; }
        .btn-incorrect { background-color: #e74c3c; }

        .btn-menu {
            display: inline-block; 
            background: #7f8c8d; 
            color:white; 
            margin-top:30px; 
            padding: 15px 30px; 
            border:none; 
            border-radius:8px; 
            font-size:1.1rem; 
            cursor:pointer;
        }

        code { background: #eee; padding: 2px 4px; border-radius: 4px; color: #c7254e; }
        
        .answer-text { text-align: left; line-height: 1.6; }
        strong { color: #2c3e50; }

        .ai-generated {
            background-color: #fff3cd;
            color: #856404;
            border: 1px solid #ffeeba;
            padding: 8px 12px;
            border-radius: 5px;
            font-size: 0.85rem;
            margin-bottom: 15px;
            display: inline-block;
            font-weight: bold;
        }

        .mode-badge {
            position: absolute;
            top: 20px;
            right: 20px;
            background: #e1e1e1;
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 0.8rem;
            color: #555;
            font-weight: bold;
        }
        /* --- HAMBURGER MENU & SIDEBAR --- */
        .hamburger-btn {
            position: fixed;
            top: 15px;
            left: 20px;
            z-index: 2000;
            background: #2c3e50;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            font-size: 1.5rem;
            cursor: pointer;
            box-shadow: 0 2px 10px rgba(0,0,0,0.2);
            transition: background 0.3s;
        }
        .hamburger-btn:hover { background: #34495e; }

        .sidebar {
            position: fixed;
            top: 0;
            left: 0;
            width: 320px;
            height: 100vh;
            background: white;
            z-index: 1999;
            box-shadow: 2px 0 15px rgba(0,0,0,0.2);
            transform: translateX(-100%);
            transition: transform 0.3s ease-in-out;
            overflow-y: auto;
            padding-top: 70px; /* Priestor pre tlacidlo */
            padding-bottom: 30px;
        }

        .sidebar.active {
            transform: translateX(0);
        }

        .sidebar-category {
            background: #f0f2f5;
            padding: 10px 20px;
            font-weight: bold;
            color: #2c3e50;
            border-bottom: 1px solid #ddd;
            font-size: 0.95rem;
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-top: 5px;
        }

        .sidebar-item {
            display: block;
            padding: 10px 20px;
            color: #555;
            text-decoration: none;
            border-bottom: 1px solid #eee;
            font-size: 0.9rem;
            cursor: pointer;
            transition: background 0.2s, padding-left 0.2s;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .sidebar-item:hover {
            background: #eef2f7;
            padding-left: 25px;
            color: #3498db;
        }

        .sidebar-item-id {
            font-weight: bold;
            color: #999;
            margin-right: 8px;
            font-size: 0.8rem;
        }

        /* --- MODAL WINDOW --- */
        .modal-overlay {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.6);
            z-index: 3000;
            justify-content: center;
            align-items: center;
            backdrop-filter: blur(3px);
        }

        .modal-content {
            background: white;
            width: 90%;
            max-width: 800px;
            max-height: 90vh;
            border-radius: 15px;
            padding: 30px;
            position: relative;
            overflow-y: auto;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
            animation: slideUp 0.3s ease-out;
        }

        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid #f0f2f5;
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 2rem;
            color: #aaa;
            cursor: pointer;
            padding: 0 10px;
            line-height: 1;
        }
        .modal-close:hover { color: #e74c3c; }

        .modal-q-text { font-size: 1.1rem; color: #2c3e50; margin-bottom: 20px; font-weight: 500; }
        .modal-a-text { background: #fdfdfd; padding: 20px; border-left: 5px solid #2ecc71; border-radius: 5px; }

        .btn-exam { background-color: #e67e22; }

        /* --- NAVIGATION GRID STYLES --- */
        .nav-grid {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            justify-content: center;
            margin-bottom: 20px;
            max-width: 950px;
            padding: 10px;
            background: #fff;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.05);
        }

        .nav-item {
            width: 35px;
            height: 35px;
            border: 1px solid #d1d5db;
            background: white;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            border-radius: 5px;
            font-size: 0.9rem;
            font-weight: 600;
            color: #555;
            transition: all 0.2s;
        }

        .nav-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            border-color: #3498db;
        }

        /* Aktu√°lne vybran√° ot√°zka */
        .nav-item.active {
            border: 2px solid #2c3e50;
            transform: scale(1.1);
            z-index: 10;
        }

        /* Stavy odpoved√≠ */
        .nav-item.correct {
            background-color: #2ecc71;
            color: white;
            border-color: #27ae60;
        }

        .nav-item.incorrect {
            background-color: #e74c3c;
            color: white;
            border-color: #c0392b;
        }
    </style>
</head>
<body>

    <!-- HAMBURGER BUTTON -->
    <button class="hamburger-btn" onclick="toggleSidebar()">‚ò∞ Menu</button>

    <!-- SIDEBAR MENU -->
    <div class="sidebar" id="sidebar">
        <!-- Javascript sem vygeneruje obsah -->
    </div>

    <!-- MODAL WINDOW -->
    <div class="modal-overlay" id="modal-overlay" onclick="closeModal(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <div class="modal-header">
                <h2 style="margin:0; color:#3498db;">Detail ot√°zky <span id="modal-id"></span></h2>
                <button class="modal-close" onclick="closeModalDirect()">√ó</button>
            </div>
            <div class="modal-q-text" id="modal-question"></div>
            <div><strong>Odpoveƒè:</strong></div>
            <div class="modal-a-text" id="modal-answer"></div>
        </div>
    </div>

    <!-- HLAVN√â MENU -->
    <div class="menu-container" id="main-menu">
        <h1 class="menu-title">Datab√°zy: Pr√≠prava na sk√∫≈°ku.</h1>
        <button class="menu-btn btn-learn" onclick="startLearning()">üìö V≈°etky karty (Uƒçenie)</button>
        <button class="menu-btn btn-test" onclick="startTest()">üé≤ Spusti≈• Z√ÅPOƒåET</button>
        <!-- NOV√â TLAƒåIDLO -->
        <button class="menu-btn btn-exam" onclick="startExam()">üéì Spusti≈• SK√ö≈†KU (50 ot.)</button>
        
        <p style="color:#777; margin-top:20px; font-size:0.9rem;">
            <strong>Uƒçenie:</strong> Prech√°dzajte v≈°etk√Ωch 171 ot√°zok rad za radom.<br>
            <strong>Test:</strong> Dostanete 1 n√°hodn√∫ ot√°zku z ka≈æd√©ho z 25 okruhov.<br>
            <strong>Sk√∫≈°ka:</strong> Mix 50 ot√°zok (30 praktick√Ωch + 20 teoretick√Ωch).
        </p>
    </div>

    <!-- HERN√Å PLOCHA -->
    <div class="game-area" id="game-area">
        <div class="mode-badge" id="mode-indicator"></div>
        <!-- NAVIGAƒåN√Å MRIE≈ΩKA -->
        <div class="nav-grid" id="nav-grid">
            <!-- JavaScript sem vygeneruje ≈°tvorƒçeky -->
        </div>
        <div class="stats">
            <div class="stat-box">
                <span class="stat-value remaining" id="count-remaining">0</span>
                <span class="stat-label">Zost√°va</span>
            </div>
            <div class="stat-box">
                <span class="stat-value correct" id="count-correct">0</span>
                <span class="stat-label">Spr√°vne</span>
            </div>
            <div class="stat-box">
                <span class="stat-value incorrect" id="count-incorrect">0</span>
                <span class="stat-label">Nespr√°vne</span>
            </div>
        </div>

        <div class="card-container" id="card-container">
            <div class="card" id="flashcard">
                <div class="card-face card-front">
                    <h3>Ot√°zka <span id="q-num"></span></h3>
                    <div id="q-text" style="width: 100%;"></div>
                </div>
                <div class="card-face card-back">
                    <h3>Odpoveƒè</h3>
                    <div id="a-text" style="width: 100%;"></div>
                </div>
            </div>
        </div>

        <div class="controls" id="controls">
            <button id="btn-incorrect" class="btn-control btn-incorrect" onclick="handleAnswer(false)">Nespr√°vne</button>
            <button id="btn-correct" class="btn-control btn-correct" onclick="handleAnswer(true)">Spr√°vne</button>
        </div>
    </div>

    <script>
        // --- DATA (136 QUESTIONS) ---
        const questions = [
            // --- DB LINK INSERT (1-3) ---
            { id: 1, q: "M√°me vytvoren√Ω datab√°zov√Ω link <code>remote_link</code>, ktor√Ω sa odkazuje na in≈°tanciu students_pdb. Pou≈æ√≠vateƒæ lenka. <br>Nap√≠≈°te pr√≠kaz, ktor√Ω vlo≈æ√≠ obsah lok√°lnej tabuƒæky <code>p_predmet</code> do tabuƒæky <code>backup_predmet</code> pou≈æ√≠vateƒæa tomas na vzdialenom serveri.", a: "<pre>INSERT INTO tomas.backup_predmet@remote_link\nSELECT * FROM p_predmet;</pre>" },
            { id: 2, q: "M√°me DB link <code>remote_link</code> (students_pdb), user tomas. <br>Nap√≠≈°te pr√≠kaz, ktor√Ω vlo≈æ√≠ obsah lok√°lnej tabuƒæky <code>p_vzdelanie</code> do tabuƒæky <code>data_vzdelanie</code> pou≈æ√≠vateƒæa lenka na vzdialenom serveri.", a: "<pre>INSERT INTO lenka.data_vzdelanie@remote_link\nSELECT * FROM p_vzdelanie;</pre>" },
            { id: 3, q: "M√°me DB link <code>remote_link</code>, user tomas. <br>Vlo≈æte do tabuƒæky <code>log_osoby</code> pou≈æ√≠vateƒæa lenka na vzdialenom serveri v≈°etky z√°znamy z lok√°lnej <code>p_osoba</code>, pre ktor√© <code>id_osoby</code> e≈°te neexistuje vo vzdialenej tabuƒæke.", a: "<pre>INSERT INTO lenka.log_osoby@remote_link\nSELECT * FROM p_osoba po \nWHERE NOT EXISTS \n  (SELECT 'x' FROM lenka.log_osoby@remote_link lo\n   WHERE lo.id_osoby = po.id_osoby);</pre>" },
            
            // --- DB LINK UPDATE (4-6) ---
            { id: 4, q: "M√°me DB link <code>remote_link</code> (orcl_pdb), user dusan. <br>Aktualizujte lok√°lnu tabuƒæku <code>p_poistenie</code>: nastavte d√°tum ukonƒçenia (<code>dat_do = SYSDATE</code>) pre v≈°etky osoby, ktor√Ωch <code>id_osoby</code> sa nach√°dza v tabuƒæke <code>data_osoby</code> pou≈æ√≠vateƒæa dusan na vzdialenom serveri.", a: "<pre>UPDATE p_poistenie\nSET dat_do = SYSDATE\nWHERE id_osoby IN \n  (SELECT id_osoby\n   FROM dusan.data_osoby@remote_link);</pre>" },
            { id: 5, q: "M√°me DB link <code>remote_link</code>, user jana. <br>Aktualizujte lok√°lnu tabuƒæku <code>p_zamestnanec</code>: nastavte <code>stav = 'NEAKTIVNY'</code> pre zamestnancov, ktor√Ωch ID je v tabuƒæke <code>inactive_ids</code> pou≈æ√≠vateƒæa tomas na vzdialenom serveri.", a: "<pre>UPDATE p_zamestnanec\nSET stav = 'NEAKTIVNY'\nWHERE id_zamestnanec IN \n  (SELECT ID_ZAMESTNANEC FROM \n   tomas.inactive_ids@remote_link);</pre>" },
            { id: 6, q: "M√°me DB link <code>remote_link</code>, user jana. <br>Aktualizujte lok√°lnu tabuƒæku <code>p_student</code>: ukonƒçite platnos≈• ≈°t√∫dia (<code>dat_do = sysdate</code>) pre ≈°tudentov, ktor√Ωch <code>os_cislo</code> je v tabuƒæke <code>ukonceni_studenti</code> pou≈æ√≠vateƒæa lenka na vzdialenom serveri.", a: "<pre>UPDATE p_student\nSET dat_do = sysdate\nWHERE os_cislo IN \n  (SELECT os_cislo FROM \n   lenka.ukonceni_studenti@remote_link);</pre>" },
            
            // --- DB LINK LOCAL OPS (7-8) ---
            { id: 7, q: "M√°me DB link <code>remote_link</code> (students_pdb), user martin. <br>Vlo≈æte do <strong>lok√°lnej</strong> tabuƒæky <code>p_predmet</code> obsah tabuƒæky <code>predmet_link</code> pou≈æ√≠vateƒæa martin na vzdialenom serveri.", a: "<pre>INSERT INTO p_predmet\nSELECT * FROM martin.predmet_link@remote_link;</pre>" },
            { id: 8, q: "M√°me DB link <code>remote_link</code>, user martin. <br>Vlo≈æte do <strong>lok√°lnej</strong> tabuƒæky <code>p_ucty</code> z√°znamy z tabuƒæky <code>backup_ucty</code> pou≈æ√≠vateƒæa lenka na vzdialenom serveri.", a: "<pre>INSERT INTO p_ucty\nSELECT * FROM lenka.backup_ucty@remote_link;</pre>" },
            
            // --- DB LINK DELETE (9-10) ---
            { id: 9, q: "M√°me DB link <code>remote_link</code>, user andrea. <br>Odstr√°≈àte z <strong>lok√°lnej</strong> tabuƒæky <code>p_poberatel</code> v≈°etk√Ωch poberateƒæov, ktor√Ωch <code>id_poberatela</code> sa nach√°dza v tabuƒæke <code>del_ids</code> pou≈æ√≠vateƒæa andrea na vzdialenom serveri.", a: "<pre>DELETE FROM p_poberatel\nWHERE id_poberatela IN \n  (SELECT ID_POBERATELA FROM \n   andrea.del_ids@remote_link);</pre>" },
            { id: 10, q: "M√°me DB link <code>remote_link</code>, user andrea. <br>Odstr√°≈àte z <strong>lok√°lnej</strong> tabuƒæky <code>p_nepritomnost</code> v≈°etky z√°znamy, ktor√Ωch <code>id_neprit</code> sa nach√°dza v tabuƒæke <code>del_neprit</code> pou≈æ√≠vateƒæa tomas na vzdialenom serveri.", a: "<pre>DELETE FROM p_nepritomnost pn\nWHERE EXISTS\n  (SELECT 'x' FROM tomas.del_neprit@remote_link rmt\n   WHERE pn.id_neprit = rmt.id_neprit);</pre>" },
            
            // --- INDEX DDL (11-13) ---
            { id: 11, q: "Vygenerujte pr√≠kazy (netreba spusti≈•) na zru≈°enie v≈°etk√Ωch B-tree indexov nad tabuƒækou <code>p_poistenie</code>. <br>Pou≈æite pohƒæad <code>user_indexes</code>, filter <code>index_type = 'NORMAL'</code>.", a: "<pre>SELECT 'DROP INDEX \"' || index_name || '\";' \nFROM user_indexes\nWHERE table_name = 'P_POISTENIE'\nAND index_type = 'NORMAL';</pre>" },
            { id: 12, q: "Vygenerujte pr√≠kazy na zru≈°enie v≈°etk√Ωch indexov nad tabuƒækou <code>p_mesto</code>, <strong>okrem</strong> indexov zabezpeƒçuj√∫cich unik√°tnos≈• (constraint type 'U').", a: "<pre>SELECT 'DROP INDEX ' || index_name || ';'\nFROM user_indexes\nWHERE table_name = 'P_MESTO'\nAND index_name NOT IN \n  (SELECT index_name\n   FROM user_constraints\n   WHERE table_name = 'P_MESTO'\n   AND constraint_type = 'U');</pre>" },
            { id: 13, q: "Vygenerujte pr√≠kazy na <strong>rebuild</strong> v≈°etk√Ωch indexov, ktor√© s√∫ asociovan√© s cudz√≠mi kƒæ√∫ƒçmi (<code>constraint_type = 'R'</code>) v sch√©me.", a: "<pre>SELECT 'ALTER INDEX ' || i.index_name || ' REBUILD;'\nFROM user_indexes i\nJOIN user_constraints c \n  ON i.index_name = c.constraint_name\nWHERE c.constraint_type = 'R';</pre>" },
            
            // --- INDEX DESIGN (14-19) ---
            { id: 14, q: "Vytvorte najvhodnej≈°√≠ index pre pr√≠kaz:<br><pre>select rod_cislo, meno, priezvisko \nfrom p_osoba \nwhere lower(priezvisko) like 'nov%';</pre>", a: "<strong>Function-based index:</strong><br><pre>CREATE INDEX ind_osoba_priezv_lower\nON p_osoba(lower(priezvisko));</pre>" },
            { id: 15, q: "Vytvorte najvhodnej≈°√≠ index(y) pre pr√≠kaz:<br><pre>select meno, priezvisko, nazov_mesta\nfrom p_osoba join p_mesto using (psc)\nwhere psc between '01000' and '09999';</pre>", a: "Je potrebn√© vytvori≈• index pre ka≈æd√∫ tabuƒæku na spojovac√≠ stƒ∫pec:<br><pre>CREATE INDEX ind_osoba_psc\nON p_osoba(psc, meno, priezvisko);\n\nCREATE INDEX ind_mesto_psc\nON p_mesto(psc, nazov_mesta);</pre>" },
            { id: 16, q: "Vytvorte najvhodnej≈°√≠ index pre pr√≠kaz:<br><pre>select suma from p_prispevky\nwhere kedy between to_date(...)\nand to_date(...);</pre>", a: "<pre>CREATE INDEX ind_prispevky_todate\nON p_prispevky(kedy, suma);</pre>" },
            { id: 17, q: "Vytvorte najvhodnej≈°√≠ index pre dotaz:<br><pre>select nazov from p_postihnutie\nwhere lower(nazov) like '%sluch%';</pre>", a: "<pre>CREATE INDEX ind_post_lower\nON p_postihnutie(lower(nazov), nazov);</pre><br><i>Pozn√°mka:</i> Aj keƒè je '%' na zaƒçiatku, index (Fast Full Scan) je r√Ωchlej≈°√≠ ako Full Table Scan, lebo je fyzicky men≈°√≠." },
            { id: 18, q: "Vytvorte najvhodnej≈°√≠ index pre pr√≠kaz:<br><pre>select meno, priezvisko from zamestnanec\nwhere datum_do is null;</pre>", a: "<pre>CREATE INDEX ind_zamestnanec_datum\nON zamestnanec(datum_do, meno, priezvisko);</pre><br><i>D√¥le≈æit√©:</i> Do indexu mus√≠me prida≈• aj NOT NULL stƒ∫pce (meno, priezvisko), inak by sa riadky, kde je kƒæ√∫ƒç NULL, do B-tree indexu neulo≈æili." },
            { id: 19, q: "Vytvorte najvhodnej≈°√≠ index pre dotaz:<br><pre>select * from p_osoba\nwhere substr(rod_cislo,1,1) = '6';</pre>", a: "<pre>CREATE INDEX ind_osoba_substr\nON p_osoba(substr(rod_cislo, 1, 1));</pre>" },
            
            // --- ACCESS METHODS (20-23) ---
            { id: 20, q: "M√°me index <code>(psc, meno, priezvisko)</code>.<br>Ak√∫ pr√≠stupov√∫ met√≥du zvol√≠ DB pre:<br><code>WHERE psc = '01001'</code>?<br>Zd√¥vodnite.", a: "<strong>INDEX RANGE SCAN</strong><br>1. Leading Column (psc) je pou≈æit√Ω v podmienke.<br>2. PSC nie je unik√°tne -> Range Scan.<br>3. Je to Covering Index (v≈°etky stƒ∫pce s√∫ v indexe)." },
            { id: 21, q: "M√°me index <code>(id_typu, kedy)</code>.<br>Ak√∫ pr√≠stupov√∫ met√≥du zvol√≠ DB pre:<br><code>select sum(suma) ... WHERE id_typu = 4;</code>?<br>Zd√¥vodnite.", a: "<strong>INDEX RANGE SCAN</strong> nasledovan√Ω <strong>TABLE ACCESS BY INDEX ROWID</strong>.<br>Pou≈æ√≠va sa vodiaci stƒ∫pec <code>id_typu</code> (Range scan).<br>Ale stƒ∫pec <code>suma</code> nie je v indexe, tak≈æe DB mus√≠ √≠s≈• do tabuƒæky pre d√°ta." },
            { id: 22, q: "M√°me index <code>(nazov, id_postihnutia)</code>.<br>Ak√∫ pr√≠stupov√∫ met√≥du zvol√≠ DB pre:<br><code>WHERE upper(nazov) = 'ZRAKOVA PORUCHA';</code>?<br>Zd√¥vodnite.", a: "<strong>INDEX FAST FULL SCAN</strong><br>Datab√°za nem√¥≈æe pou≈æi≈• strom na vyhƒæadanie (pou≈æit√° funkcia UPPER a index nie je funkƒçn√Ω).<br>Ale index obsahuje v≈°etky potrebn√© stƒ∫pce a je men≈°√≠ ako tabuƒæka -> preƒç√≠ta cel√Ω index rad za radom." },
            { id: 23, q: "M√°me index <code>(datum_do, datum_od)</code>.<br>Ak√∫ met√≥du zvol√≠ DB pre:<br><code>select datum_od ... WHERE datum_od > sysdate - 30;</code>?", a: "<strong>INDEX FAST FULL SCAN</strong><br>Preƒço nie Range Scan? Vodiaci stƒ∫pec (datum_do) ch√Ωba vo WHERE.<br>Preƒço nie Table Scan? V≈°etky ≈æiadan√© stƒ∫pce s√∫ v indexe, je efekt√≠vnej≈°ie preƒç√≠ta≈• cel√Ω index ne≈æ cel√∫ tabuƒæku." },
            
            // --- INDEX THEORY (24-30) ---
            { id: 24, q: "Vysvetlite princ√≠p <strong>Index Range Scan</strong> a podmienky pre pou≈æitie.", a: "<strong>Princ√≠p:</strong> Prejde kore≈àom a vetvami B-stromu k prv√©mu listu, potom ƒç√≠ta horizont√°lne.<br><strong>Podmienky:</strong><br>1. Mus√≠ by≈• pou≈æit√Ω vodiaci (prv√Ω) stƒ∫pec indexu.<br>2. Index je neunik√°tny ALEBO oper√°tor je rozsahov√Ω (<, >, LIKE, BETWEEN)." },
            { id: 25, q: "Kedy sa pou≈æije <strong>Index Unique Scan</strong>?", a: "Pou≈æije sa, ak je zaruƒçen√©, ≈æe dotaz vr√°ti <strong>maxim√°lne jeden riadok</strong>.<br>Podmienky: Oper√°tor rovnosti (=) na Primary Key alebo Unique Index." },
            { id: 26, q: "ƒåo je podstatou met√≥dy <strong>Bitmap Index Combine</strong>?", a: "Efekt√≠vne vyu≈æitie bitov√Ωch oper√°ci√≠ (AND, OR, NOT) priamo v pam√§ti nad viacer√Ωmi bitmapov√Ωmi indexmi predt√Ωm, ne≈æ sa siahne na fyzick√© d√°ta." },
            { id: 27, q: "ƒåo sp√¥sobuje vznik <strong>chained row</strong> a kedy sa zhor≈°uje?", a: "Vznik√° pri UPDATE, keƒè sa riadok zv√§ƒç≈°√≠ tak, ≈æe sa nezmest√≠ do p√¥vodn√©ho bloku. Vytvor√≠ sa link na ƒèal≈°√≠ blok.<br>Zhor≈°uje sa s narastaj√∫cim poƒçtom UPDATE oper√°ci√≠ meniacich veƒækos≈• d√°t (fragment√°cia)." },
            { id: 28, q: "Ak√Ω je rozdiel medzi <strong>Function-based index</strong> a norm√°lnym B-tree indexom?", a: "Norm√°lny uklad√° skutoƒçn√© hodnoty stƒ∫pca. Function-based uklad√° <strong>v√Ωsledok funkcie</strong> (napr. UPPER(meno)). Umo≈æ≈àuje vyu≈æi≈• index aj keƒè je vo WHERE pou≈æit√° funkcia." },
            { id: 29, q: "Ak√∫ selektivitu preferuje B-tree index a preƒço?", a: "Preferuje <strong>vysok√∫ selektivitu</strong> (vysok√∫ kardinalitu/unik√°tnos≈•).<br>Pri n√≠zkej selektivite (veƒæa duplicitn√Ωch hodn√¥t) str√°ca efektivitu a DB m√¥≈æe zvoli≈• Full Table Scan." },
            { id: 30, q: "ƒåo vyjadruje klauzula <code>parallel n</code> pri defin√≠cii indexu?", a: "Urƒçuje, ≈æe pri <strong>vytv√°ran√≠</strong> indexu sa m√° pou≈æi≈• paralelizmus (n vl√°kien).<br>D√¥sledok: Dotazy vyu≈æ√≠vaj√∫ce tento index bud√∫ tie≈æ inklinova≈• k paraleln√©mu vykon√°vaniu." },
            
            // --- LOB THEORY (31-40) ---
            { id: 31, q: "Ak√Ω je rozdiel medzi <strong>BLOB</strong> a <strong>BFILE</strong> z hƒæadiska ulo≈æenia d√°t?", a: "<strong>BLOB (Internal):</strong> D√°ta fyzicky vo vn√∫tri DB.<br><strong>BFILE (External):</strong> D√°ta externe v OS (s√∫borov√Ω syst√©m), v DB len ukazovateƒæ (read-only)." },
            { id: 32, q: "Ak√© s√∫ rozdiely medzi intern√Ωm (CLOB, BLOB) a extern√Ωm (BFILE) LOB-om?", a: "<strong>Intern√Ω:</strong> Podporuje transakcie (ACID), d√°ta sa daj√∫ modifikova≈•.<br><strong>Extern√Ω:</strong> Read-only, nepodporuje transakcie (COMMIT/ROLLBACK neovplyvn√≠ s√∫bor)." },
            { id: 33, q: "ƒåo je <strong>LOB locator</strong>?", a: "Ukazovateƒæ na veƒæk√© d√°ta.<br>Pri intern√Ωch ukazuje na miesto v DB.<br>Pri BFILE uchov√°va cestu k s√∫boru.<br>Umo≈æ≈àuje pr√°cu s LOBom bez naƒç√≠tania cel√©ho obsahu do pam√§te." },
            { id: 34, q: "Ktor√© oper√°cie nad LOBmi sp√¥sobuj√∫ alokovanie nov√©ho segmentu?", a: "Vkladanie d√°t cez INSERT alebo UPDATE, resp. <code>DBMS_LOB.LOADFROMFILE</code>.<br>Samotn√Ω <code>EMPTY_CLOB()</code> len inicializuje locator na NULL/pr√°zdny." },
            { id: 35, q: "Ak√Ω je rozdiel medzi <strong>SecureFile</strong> a <strong>BasicFile</strong> LOB z hƒæadiska v√Ωkonu?", a: "<strong>SecureFile:</strong> Nov≈°√≠, vy≈°≈°√≠ v√Ωkon, Write Gather Cache, variabiln√Ω chunk, deduplik√°cia, kompresia.<br><strong>BasicFile:</strong> Star≈°√≠, fixn√Ω chunk, bez cache." },
            { id: 36, q: "Vymenujte 3 v√Ωhody SecureFile LOBov.", a: "1. Advanced performance (WGC)<br>2. Advanced security (≈°ifrovanie)<br>3. Advanced storage optimization (kompresia, deduplik√°cia)" },
            { id: 37, q: "Kedy Oracle automaticky komprimuje SecureFile LOB?", a: "Keƒè je zapnut√° voƒæba <code>COMPRESS</code> (HIGH/MEDIUM/LOW) a server rozpozn√° pr√≠nos kompresie." },
            { id: 38, q: "ƒåo vyjadruje hodnota <code>RETENTION</code> pri SecureFile LOB?", a: "Nahr√°dza PCTVERSION. Urƒçuje spr√°vu Undo d√°t pre konzistentn√© ƒç√≠tanie.<br>AUTO: Podƒæa veƒækosti Undo tablespace.<br>MAX: Uchov√°va ƒço najdlh≈°ie (pre dlh√© transakcie)." },
            { id: 39, q: "ƒåo predstavuje parameter <code>CACHE / NOCACHE</code> pri LOBoch?", a: "Urƒçuje, ƒçi id√∫ d√°ta cez <strong>Buffer Cache</strong> (CACHE - umo≈æ≈àuje logging) alebo priamy z√°pis na disk (NOCACHE)." },
            { id: 40, q: "Ak√Ω je maxim√°lny poƒçet otvoren√Ωch BFILE objektov v rel√°cii?", a: "Definuje to parameter <code>SESSION_MAX_OPEN_FILES</code> (default 10)." },
            
            // --- LOB PACKAGES (41-49) ---
            { id: 41, q: "Preƒço nemo≈æno pou≈æi≈• typ <strong>LONG</strong> vo viacer√Ωch stƒ∫pcoch tabuƒæky?", a: "Historick√© obmedzenie. Uklad√° sa 'inline', ƒço pri 2GB d√°tach sp√¥sobovalo extr√©mne v√Ωkonnostn√© probl√©my (re≈•azenie)." },
            { id: 42, q: "Rozdiel medzi <code>DBMS_LOB.SUBSTR</code> a SQL <code>SUBSTR</code>?", a: "SQL SUBSTR rob√≠ implicitn√∫ konverziu na VARCHAR (limit 4000 znakov).<br><code>DBMS_LOB.SUBSTR</code> pracuje priamo s LOB locatorom a dok√°≈æe ƒç√≠ta≈• ƒçasti z GB d√°t bez naƒç√≠tania cel√©ho objektu." },
            { id: 43, q: "Na ƒço sl√∫≈æi <code>DBMS_LOB.FILEEXISTS</code>?", a: "Overuje existenciu s√∫boru v OS pred pr√°cou s n√≠m (vr√°ti 1 alebo 0). Vytvorenie DIRECTORY objektu toti≈æ nekontroluje existenciu cesty." },
            { id: 44, q: "√öloha <code>DBMS_LOB.OPEN</code> pri BFILE?", a: "Otv√°ra fyzick√Ω s√∫bor v OS a men√≠ 'pas√≠vny' odkaz na 'akt√≠vny' stream pre ƒç√≠tanie d√°t." },
            { id: 45, q: "ƒåo rob√≠ <code>DBMS_LOB.COMPARE</code>?", a: "Porovn√°va dva LOB objekty alebo ich ƒçasti. Vr√°ti 0 ak s√∫ zhodn√©. Efekt√≠vne pre veƒæk√© objekty (nemus√≠ ƒç√≠ta≈• cel√©)." },
            { id: 46, q: "Rozdiel medzi READ ONLY a READ WRITE pri <code>DBMS_LOB.OPEN</code>?", a: "<strong>READ ONLY:</strong> Len ƒç√≠tanie (v≈ædy pre BFILE), bez zamykania.<br><strong>READ WRITE:</strong> Pre intern√© LOBy, modifik√°cia. Malo by sa pou≈æi≈• s <code>FOR UPDATE</code>." },
            { id: 47, q: "Preƒço nemo≈æno aktualizova≈• BFILE cez UPDATE?", a: "BFILE je read-only s√∫bor v OS. DB nem√° nad n√≠m transakƒçn√∫ kontrolu. UPDATE zmen√≠ len locator (cestu), nie obsah s√∫boru." },
            { id: 48, q: "Princ√≠p <code>DBMS_CRYPTO.ENCRYPT</code> pri LOBoch?", a: "Manu√°lne ≈°ifrovanie v PL/SQL. Vezme LOB, kƒæ√∫ƒç, algoritmus a vr√°ti za≈°ifrovan√Ω BLOB." },
            { id: 49, q: "Na ƒço sl√∫≈æi <code>DBMS_CRYPTO.HASH</code>?", a: "Vypoƒç√≠ta 'odtlaƒçok' (hash) z LOBu. Pou≈æ√≠va sa na deduplik√°ciu alebo kontrolu integrity d√°t." },
            
            // --- JSON (50-61) ---
            { id: 50, q: "Nap√≠≈°te pr√≠kaz SELECT, pomocou ktor√©ho prist√∫pite ku v≈°etk√Ωm knih√°m z tabuƒæky <code>kniha_json</code>, ktor√Ωch autor zaƒç√≠na na p√≠smeno M. Jednotliv√© knihy s√∫ vo form√°te JSON.", a: "<pre>select * from kniha_json k\nwhere k.doc.autor like 'M%'</pre>" },
            { id: 51, q: "Nap√≠≈°te pr√≠kaz SELECT, ktor√Ω vr√°ti v≈°etky n√°zvy kn√≠h (z <code>kniha_json</code>) vydan√© po roku 2010. Pou≈æite <code>JSON_VALUE</code> a <code>RETURNING NUMBER</code>.", a: "<pre>SELECT JSON_VALUE(doc, '$.nazov')\nFROM kniha_json\nWHERE JSON_VALUE(doc, '$.rok_vydania' \n  RETURNING NUMBER) > 2010;</pre>" },
            { id: 52, q: "SELECT nad <code>student_json</code>, ktor√Ω vr√°ti ≈°tudentov s roƒçn√≠kom vy≈°≈°√≠m ako 2.", a: "<pre>select * from student_json s \nwhere s.student.rocnik > 2;</pre>" },
            { id: 53, q: "SELECT mien ≈°tudentov z <code>student_json</code>, ktor√≠ maj√∫ priemer zn√°mok men≈°√≠ ne≈æ 2.0.", a: "<pre>select json_value(student, '$.meno') \nfrom student_json\nwhere json_value(student, '$.priemer' \n  returning number) < 2.0;</pre>" },
            { id: 54, q: "SELECT v≈°etk√Ωch produktov z <code>produkt_json</code>, ktor√Ωch cena je vy≈°≈°ia ako 20 eur.", a: "<pre>select * from produkt_json\nwhere json_value(produkt, '$.cena' \n  returning number) > 20;</pre>" },
            { id: 55, q: "SELECT n√°zvov produktov z <code>produkt_json</code>, ktor√© patria do kateg√≥rie 'Elektronika'.", a: "<pre>select p.produkt.nazov \nfrom produkt_json p\nwhere p.produkt.kategoria = 'Elektronika';</pre>" },
            { id: 56, q: "SELECT zamestnancov z <code>zamestnanec_json</code>, ktor√≠ pracuj√∫ na poz√≠cii 'Manager'.", a: "<pre>select * from zamestnanec_json\nwhere json_value(zamestnanec, '$.pozicia') \n  = 'Manager';</pre>" },
            { id: 57, q: "SELECT pre pristup k platom zamestnancov vy≈°≈°√≠m ako 1500 z <code>zamestnanec_json</code>.", a: "<pre>select json_value(zamestnanec, '$.plat')\nfrom zamestnanec_json\nwhere json_value(zamestnanec, '$.plat' \n  returning number) > 1500;</pre>" },
            { id: 58, q: "SELECT objedn√°vok z <code>objednavka_json</code>, kde poƒçet polo≈æiek > 3.", a: "<pre>select * from objednavka_json o\nwhere o.doc.pocet_poloziek > 3;\n-- alebo cez json_value</pre>" },
            { id: 59, q: "SELECT celkov√Ωch cien objedn√°vok > 100 z <code>objednavka_json</code>.", a: "<pre>select json_value(doc, '$.celkova_cena')\nfrom objednavka_json\nwhere json_value(doc, '$.celkova_cena' \n  returning number) > 100;</pre>" },
            { id: 60, q: "SELECT z√°kazn√≠kov z <code>zakaznik_json</code>, ktor√≠ maj√∫ vek > 30.", a: "<pre>select * from zakaznik_json z\nwhere z.doc.vek > 30;</pre>" },
            { id: 61, q: "SELECT n√°zvov filmov z <code>film_json</code>, s hodnoten√≠m > 7.5.", a: "<pre>select f.doc.nazov\nfrom film_json f\nwhere f.doc.rating > 7.5;</pre>" },

            // --- GENERAL THEORY (62-69) ---
            { id: 62, q: "Vysvetlite rozdiel medzi LOB typmi: <strong>Inline</strong> vs <strong>Out-of-line</strong> ulo≈æenie.", a: "<div class='answer-text'><strong>Mal√© LOB d√°ta (Inline):</strong> Ukladaj√∫ sa priamo v riadku tabuƒæky (ak s√∫ do cca 4KB).<br><strong>Veƒæk√© LOB d√°ta (Out-of-line):</strong> Ukladaj√∫ sa v samostatn√Ωch segmentoch (LOBSEGMENT). V tabuƒæke ost√°va len <strong>LOB locator</strong> (ukazovateƒæ).</div>" },
            { id: 63, q: "Pop√≠≈°te fyzick√∫ ≈°trukt√∫ru datab√°zy (Bloky, Extenty, Segmenty).", a: "<div class='answer-text'><strong>D√°tov√Ω blok:</strong> Najmen≈°ia I/O jednotka.<br><strong>Extent:</strong> Zoskupenie s√∫visl√Ωch blokov.<br><strong>Segment:</strong> Sada extentov (napr. cel√° tabuƒæka alebo index).<br><strong>ROWID:</strong> Unik√°tna fyzick√° adresa riadku (s√∫bor, blok, riadok).</div>" },
            { id: 64, q: "ƒåo je to transakcia a na ƒço sl√∫≈æia Redo Logy a Undo segmenty?", a: "<div class='answer-text'><strong>Transakcia:</strong> Logick√° jednotka pr√°ce (ACID).<br><strong>Redo Log:</strong> Zapisuje v≈°etky zmeny pre pr√≠pad obnovy (recovery) po v√Ωpadku.<br><strong>Undo:</strong> Uklad√° p√¥vodn√© hodnoty pre mo≈ænos≈• ROLLBACK a pre konzistentn√© ƒç√≠tanie (Read Consistency).</div>" },
            { id: 65, q: "Vysvetlite pam√§≈•ov√∫ architekt√∫ru <strong>SGA</strong> a <strong>Buffer Cache</strong>.", a: "<div class='answer-text'><strong>SGA (System Global Area):</strong> Zdieƒæan√° pam√§≈• in≈°tancie.<br><strong>Buffer Cache:</strong> ƒåas≈• SGA, obsahuje k√≥pie d√°tov√Ωch blokov naƒç√≠tan√Ωch z disku pre r√Ωchly pr√≠stup (minimaliz√°cia I/O).<br><strong>Shared Pool:</strong> Obsahuje parsovan√© SQL pl√°ny.</div>" },
            { id: 66, q: "Ak√° je √∫loha optimaliz√°tora (CBO)?", a: "<div class='answer-text'>Generuje vykon√°vac√≠ pl√°n na z√°klade ≈°tatist√≠k s cieƒæom minimalizova≈• cenu (CPU, I/O). Rozhoduje, ƒçi pou≈æi≈• <strong>Full Table Scan</strong> alebo <strong>Index Scan</strong>.</div>" },
            { id: 67, q: "Ako Oracle pracuje s XML (Well-formed vs Valid)?", a: "<div class='answer-text'><strong>Well-formed:</strong> Syntakticky spr√°vne (p√°rov√© tagy).<br><strong>Valid:</strong> Spƒ∫≈àa definovan√∫ ≈°trukt√∫ru (XSD/DTD).<br>Oracle typ <code>XMLType</code> automaticky kontroluje well-formedness a umo≈æ≈àuje valid√°ciu voƒçi registrovanej XSD sch√©me.</div>" },
            { id: 68, q: "ƒåo je to <strong>Database Link</strong>?", a: "<div class='answer-text'>Objekt definuj√∫ci pripojenie do vzdialenej datab√°zy. Umo≈æ≈àuje distribuovan√© dopyty (napr. <code>tabulka@dblink</code>). ƒåasto sa pou≈æ√≠vaj√∫ synonym√° na skrytie <code>@dblink</code>.</div>" },
            { id: 69, q: "Vysvetlite skratku <strong>ACID</strong>.", a: "<div class='answer-text'><strong>Atomicity:</strong> V≈°etko alebo niƒç (COMMIT/ROLLBACK).<br><strong>Consistency:</strong> Prechod z validn√©ho do validn√©ho stavu (dodr≈æanie constraints).<br><strong>Isolation:</strong> Transakcie sa neovplyv≈àuj√∫ (Readers don't block writers).<br><strong>Durability:</strong> Potvrden√© zmeny s√∫ trval√© (Redo Log).</div>" },

            // --- CONNECT BY (70-87) ---
            { id: 70, q: "Pre KA≈ΩD√ù mesiac minul√©ho roka uveƒète poƒçet poistencov, ktor√Ωm v danom mesiaci vzniklo poistenie (<code>dat_od</code>).", a: "<pre>SELECT k.mesiac, COUNT(p.id_poistenca) AS pocet\nFROM\n (SELECT level AS mesiac FROM dual \n  CONNECT BY level <= 12) k\n LEFT JOIN p_poistenie p\n ON EXTRACT(MONTH FROM p.dat_od) = k.mesiac\n AND EXTRACT(YEAR FROM p.dat_od) = \n     EXTRACT(YEAR FROM sysdate) - 1\nGROUP BY k.mesiac\nORDER BY k.mesiac;</pre>" },
            { id: 71, q: "Pre KA≈ΩD√ù mesiac minul√©ho roka uveƒète poƒçet poistencov, ktor√Ωm poistenie zaniklo (<code>dat_do</code>).", a: "<pre>select c.mesiac, count(ID_POISTENCA)\nfrom \n (select level as mesiac from dual \n  connect by level <= 12) c\n LEFT JOIN p_poistenie on \n  (to_char(dat_do, 'MM') = c.mesiac\n   AND extract(year from dat_do) = \n       extract(year from sysdate) - 1)\ngroup by c.mesiac\norder by c.MESIAC;</pre>" },
            { id: 72, q: "Pre KA≈ΩD√ù mesiac minul√©ho roka vyp√≠≈°te poƒçet zamestn√°vateƒæov, ktor√Ωm pribudol nov√Ω zamestnanec (<code>dat_nastupu</code>).", a: "<pre>with mesiace as (\n select level mesiac from dual\n connect by level <= 12\n) select mesiac, \n  count(distinct ID_ZAMESTNAVATELA) \nfrom MESIACE\nleft join p_zamestnanec on \n (mesiac = extract(month from dat_od)\n AND extract(year from dat_od) = \n     extract(year from sysdate) - 9) --rok\ngroup by mesiac\nORDER BY mesiac;</pre>" },
            { id: 73, q: "Pre KA≈ΩD√ù mesiac minul√©ho roka uveƒète poƒçet poistencov, ktor√≠ mali platn√Ω z√°znam (<code>dat_od <= den</code> a z√°rove≈à <code>dat_do</code> je NULL alebo platn√©).", a: "<pre>WITH mesiace AS (SELECT level AS mesiac \n FROM dual CONNECT BY level <= 12)\nSELECT m.mesiac, COUNT(p.id_poistenca)\nFROM mesiace m\n LEFT JOIN p_poistenie p ON(\n p.dat_od <= LAST_DAY(TO_DATE(m.mesiac || '.' \n  || (EXTRACT(YEAR FROM SYSDATE) - 1), 'MM.YYYY'))\n AND (p.dat_do IS NULL OR\n p.dat_do >= TO_DATE('01.' || m.mesiac ...\nGROUP BY m.mesiac;</pre>" },
            { id: 74, q: "Pre KA≈ΩD√ù de≈à minul√©ho roka vyp√≠≈°te celkov√Ω poƒçet pr√≠spevkov vyplaten√Ωch v danom dni.", a: "<pre>SELECT k.den, COUNT(p.id_poberatela)\nFROM\n (SELECT TRUNC(SYSDATE, 'YYYY') - LEVEL AS den\n  FROM dual CONNECT BY LEVEL <= 366) k\nLEFT JOIN p_prispevky p \n  ON TRUNC(p.kedy) = k.den\nWHERE EXTRACT(YEAR FROM k.den) = \n      EXTRACT(YEAR FROM SYSDATE) - 1\nGROUP BY k.den\nORDER BY k.den;</pre>" },
            { id: 75, q: "Pre KA≈ΩD√ù de≈à v mesiaci APR√çL minul√©ho roka vyp√≠≈°te poƒçet zamestnancov, ktor√Ωm vznikol pracovn√Ω pomer.", a: "<pre>with dni as(\n select level as den from dual\n CONNECT BY level <= 30\n) select den, count(ROD_CISLO) from DNI\nleft join p_zamestnanec on(\n extract(day from dat_od) = DEN AND\n extract(year from dat_od) = ... -1\n and extract(month from dat_od) = 4\n) group by den order by den;</pre>" },
            { id: 76, q: "Pre KA≈ΩD√ù de≈à v tre≈•om ≈°tvr≈•roku minul√©ho roka vyp√≠≈°te poƒçet poistencov, ktor√Ωm v dan√Ω de≈à zaniklo poistenie.", a: "<div class='ai-generated'>‚ö†Ô∏è Rie≈°enie doplnen√© AI (ch√Ωbalo v PDF)</div><pre>WITH dni AS (\n  SELECT TO_DATE('01.07.' || (EXTRACT(YEAR FROM SYSDATE)-1), 'DD.MM.YYYY') + LEVEL - 1 AS den\n  FROM dual CONNECT BY LEVEL <= 92 -- j√∫l-sept\n)\nSELECT d.den, COUNT(p.id_poistenca)\nFROM dni d\nLEFT JOIN p_poistenie p \n  ON p.dat_do = d.den\nGROUP BY d.den;</pre>" },
            { id: 77, q: "Pre KA≈ΩD√ù de≈à minul√©ho roka vyp√≠≈°te poƒçet os√¥b, ktor√© mali narodeniny (zhoda de≈à a mesiac).", a: "<div class='ai-generated'>‚ö†Ô∏è Rie≈°enie doplnen√© AI (ch√Ωbalo v PDF)</div><pre>WITH dni AS (\n  SELECT TRUNC(SYSDATE, 'YYYY') - LEVEL AS den\n  FROM dual CONNECT BY LEVEL <= 366\n)\nSELECT d.den, COUNT(o.rod_cislo)\nFROM dni d\nLEFT JOIN p_osoba o \n  ON TO_CHAR(o.dat_nar, 'MMDD') = TO_CHAR(d.den, 'MMDD')\nWHERE EXTRACT(YEAR FROM d.den) = EXTRACT(YEAR FROM SYSDATE) - 1\nGROUP BY d.den;</pre>" },
            { id: 78, q: "Pre KA≈ΩD√ù mesiac minul√©ho roka vyp√≠≈°te poƒçet poberateƒæov s akt√≠vnym poberan√≠m (interval prekryvu).", a: "<div class='ai-generated'>‚ö†Ô∏è Rie≈°enie doplnen√© AI (ch√Ωbalo v PDF)</div><pre>WITH mesiace AS (SELECT level AS m FROM dual CONNECT BY level <= 12)\nSELECT m.m, COUNT(p.id_poberatela)\nFROM mesiace m\nLEFT JOIN p_poberatel p ON\n  p.dat_od <= LAST_DAY(...) AND \n  (p.dat_do IS NULL OR p.dat_do >= TO_DATE('01.'||m.m...))\nGROUP BY m.m;</pre>" },
            { id: 79, q: "Pre KA≈ΩD√ù de≈à v M√ÅJI minul√©ho roka vyp√≠≈°te poƒçet pr√≠spevkov > 100 EUR.", a: "<div class='ai-generated'>‚ö†Ô∏è Rie≈°enie doplnen√© AI (ch√Ωbalo v PDF)</div><pre>WITH dni AS (\n SELECT TO_DATE('01.05.'||(EXTRACT(YEAR FROM SYSDATE)-1), 'DD.MM.YYYY') + LEVEL - 1 AS den\n FROM dual CONNECT BY LEVEL <= 31\n)\nSELECT d.den, COUNT(p.id_prispevku)\nFROM dni d\nLEFT JOIN p_prispevky p \n  ON TRUNC(p.kedy) = d.den AND p.suma > 100\nGROUP BY d.den;</pre>" },
            { id: 80, q: "Pre KA≈ΩD√ù mesiac minul√©ho roka vyp√≠≈°te poƒçet os√¥b naroden√Ωch v danom mesiaci.", a: "<div class='ai-generated'>‚ö†Ô∏è Rie≈°enie doplnen√© AI (ch√Ωbalo v PDF)</div><pre>WITH mesiace AS (SELECT level AS m FROM dual CONNECT BY level <= 12)\nSELECT m.m, COUNT(o.id_osoby)\nFROM mesiace m\nLEFT JOIN p_osoba o \n  ON EXTRACT(MONTH FROM o.dat_nar) = m.m\nGROUP BY m.m;</pre>" },
            { id: 81, q: "Pre KA≈ΩD√ù mesiac minul√©ho roka vyp√≠≈°te poƒçet poistencov so zmenou poistenia (vznik alebo z√°nik v danom mesiaci).", a: "<div class='ai-generated'>‚ö†Ô∏è Rie≈°enie doplnen√© AI (ch√Ωbalo v PDF)</div><pre>WITH mesiace AS (SELECT level AS m FROM dual CONNECT BY level <= 12)\nSELECT m.m, COUNT(p.id_poistenca)\nFROM mesiace m\nLEFT JOIN p_poistenie p ON\n  (EXTRACT(MONTH FROM p.dat_od) = m.m AND ...rok...)\n  OR\n  (EXTRACT(MONTH FROM p.dat_do) = m.m AND ...rok...)\nGROUP BY m.m;</pre>" },
            { id: 82, q: "Pre KA≈ΩD√ù de≈à v janu√°ri minul√©ho roka vyp√≠≈°te poƒçet poistencov s platn√Ωm poisten√≠m.", a: "<div class='ai-generated'>‚ö†Ô∏è Rie≈°enie doplnen√© AI (ch√Ωbalo v PDF)</div><pre>WITH dni AS (SELECT ... CONNECT BY LEVEL <= 31) -- Januar\nSELECT d.den, COUNT(p.id_poistenca)\nFROM dni d\nLEFT JOIN p_poistenie p ON\n  p.dat_od <= d.den AND (p.dat_do IS NULL OR p.dat_do >= d.den)\nGROUP BY d.den;</pre>" },
            { id: 83, q: "Pre KA≈ΩD√ù mesiac minul√©ho roka vyp√≠≈°te poƒçet nov√Ωch ZTP.", a: "<div class='ai-generated'>‚ö†Ô∏è Rie≈°enie doplnen√© AI (ch√Ωbalo v PDF)</div><pre>WITH mesiace AS (SELECT level m FROM dual CONNECT BY level <= 12)\nSELECT m.m, COUNT(z.id_ztp)\nFROM mesiace m\nLEFT JOIN p_ztp z \n  ON EXTRACT(MONTH FROM z.dat_platnosti) = m.m\n  AND EXTRACT(YEAR FROM z.dat_platnosti) = ...\nGROUP BY m.m;</pre>" },
            { id: 84, q: "Pre KA≈ΩD√ù de≈à v DECEMBRI minul√©ho roka vyp√≠≈°te poƒçet poberateƒæov, ktor√≠ prestali by≈• poberateƒæmi.", a: "<div class='ai-generated'>‚ö†Ô∏è Rie≈°enie doplnen√© AI (ch√Ωbalo v PDF)</div><pre>WITH dni AS (SELECT ... CONNECT BY LEVEL <= 31) -- December\nSELECT d.den, COUNT(p.id_poberatela)\nFROM dni d\nLEFT JOIN p_poberatel p \n  ON p.dat_do = d.den\nGROUP BY d.den;</pre>" },
            { id: 85, q: "Pre KA≈ΩD√ù mesiac minul√©ho roka vyp√≠≈°te poƒçet zamestnancov s platnou zmluvou.", a: "<div class='ai-generated'>‚ö†Ô∏è Rie≈°enie doplnen√© AI (ch√Ωbalo v PDF)</div><pre>WITH mesiace AS (SELECT level m FROM dual CONNECT BY level <= 12)\nSELECT m.m, COUNT(z.id_zamestnanca)\nFROM mesiace m\nLEFT JOIN p_zamestnanec z ON\n  z.dat_nastupu <= LAST_DAY(...) \n  AND (z.dat_ukoncenia IS NULL OR z.dat_ukoncenia >= ...)\nGROUP BY m.m;</pre>" },
            { id: 86, q: "Pre KA≈ΩD√ù de≈à minul√©ho roka vyp√≠≈°te poƒçet poistencov, ktor√Ωm v dan√Ω de≈à vzniklo poistenie.", a: "<pre>with dni as (\n select level as den from dual\n CONNECT BY level <= \n  to_number(to_char(to_date('31.12.' || ...\n) select den, count(ID_POISTENCA) from DNI\nleft join p_poistenie on(\n to_number(to_char(dat_od, 'DDD')) = DEN\n ...\n) group by den;</pre>" },
            { id: 87, q: "Pre KA≈ΩD√ù mesiac minul√©ho roka vyp√≠≈°te priemern√∫ denn√∫ sumu pr√≠spevkov.", a: "<div class='ai-generated'>‚ö†Ô∏è Rie≈°enie doplnen√© AI (ch√Ωbalo v PDF)</div><pre>WITH mesiace AS (SELECT level m FROM dual CONNECT BY level <= 12)\nSELECT m.m, AVG(p.suma)\nFROM mesiace m\nLEFT JOIN p_prispevky p \n  ON EXTRACT(MONTH FROM p.kedy) = m.m\nGROUP BY m.m;</pre>" },
            
            // --- TRANSACTIONS (88-101) ---
            { id: 88, q: "ƒåo vr√°ti posledn√Ω select?<br><pre>create table tab1 ( id integer );\ninsert into tab1 values ( 10 );\ninsert into tab1 values ( 20 );\nsavepoint sp1;\ninsert into tab1 values ( 30 );\nrollback;\ninsert into tab1 values ( 40 );\ncommit;\nselect * from tab1;</pre>", a: "<strong>40</strong><br>Preto≈æe <code>ROLLBACK</code> nem√° ≈°pecifikovan√Ω savepoint, vr√°ti cel√∫ transakciu sp√§≈• (zru≈°√≠ 10, 20, 30). Potom sa vlo≈æ√≠ 40 a commitne." },
            { id: 89, q: "ƒåo vr√°ti posledn√Ω select?<br><pre>... values (1);\n... values (2);\nsavepoint a;\n... values (3);\nsavepoint b;\n... values (4);\nrollback to a;\n... values (5);\ncommit;\nrollback;\nselect * from tab1;</pre>", a: "<strong>1, 2, 5</strong><br>Inserty 1 a 2 s√∫ pred savepointom. Rollback to A zru≈°√≠ 3 a 4. Potom sa vlo≈æ√≠ 5. Commit potvrd√≠ 1, 2, 5. Posledn√Ω rollback u≈æ nem√° ƒço robi≈•." },
            { id: 90, q: "Ak√Ω v√Ωsledok bude vyp√≠san√Ω (count)?<br><pre>begin\n insert ... (1);\n insert ... (2);\n commit;\n insert ... (3);\n rollback;\n insert ... (4);\nend;\nselect count(*) ...</pre>", a: "<strong>3</strong><br>(Hodnoty: 1, 2, 4).<br>1 a 2 s√∫ commitnut√©. 3 je rollbacknut√°. 4 je vlo≈æen√° (ale zatiaƒæ necommitnut√°, no v rovnakej session viditeƒæn√°, alebo ak nasleduje autocommit na konci bloku)." },
            { id: 91, q: "Ak√Ω v√Ωsledok bude vyp√≠san√Ω?<br><pre>begin\n for i in 1..5 loop\n  insert ... (i);\n end loop;\n rollback;\n insert ... (100);\ncommit;\nend;\nselect max(id)...</pre>", a: "<strong>100</strong><br>Cyklus vlo≈æ√≠ 1..5, ale potom nasleduje <code>ROLLBACK</code>, ktor√Ω v≈°etko zma≈æe. Vlo≈æ√≠ sa len 100." },
            { id: 92, q: "Ak√Ω v√Ωsledok bude vyp√≠san√Ω?<br><pre>set autocommit on;\n... insert (1);\n... insert (2);\n... insert (3);\nrollback;\n... insert (10);\ncommit;\nselect count(*)...</pre>", a: "<strong>4</strong><br>Pri <code>autocommit on</code> je ka≈æd√Ω pr√≠kaz samostatn√° transakcia. Rollback nem√° ƒço vraca≈• (ka≈æd√Ω insert bol hneƒè commitnut√Ω).<br>Hodnoty: 1, 2, 3, 10." },
            { id: 93, q: "Ak√Ω v√Ωsledok?<br><pre>for i in 1..6 loop\n insert (i);\n if i = 3 then savepoint sp_mid; end if;\nend loop;\nrollback to sp_mid;\ninsert (100);\ncommit;</pre>", a: "<strong>100</strong> (Podƒæa PDF slide 21)<br>Pozor na logiku: K√≥d v PDF najprv insertne 1, 2, 3. Vytvor√≠ savepoint. Potom 4, 5, 6. Rollback to sp_mid vr√°ti stav na (1, 2, 3). Potom vlo≈æ√≠ 100. <br>Wait - PDF slide 21 ukazuje v√Ωsledok <strong>100</strong> pre `select max(id)`. To znamen√° ≈æe rollback vr√°til v≈°etko? Nie, `rollback to sp_mid` zachov√°va veci pred savepointom. <br><strong>Oprava podƒæa PDF:</strong> V√Ωsledok je 100." },
            { id: 94, q: "ƒåo vr√°ti posledn√Ω select?<br><pre>... values (20);\nsavepoint s1;\n... values (30);\n... values (40);\nrollback to s1;\n... values (50);\ncommit;\nselect * ...</pre><br>A potom znova <code>rollback to s1</code>?", a: "V√Ωsledok selectu: <strong>10, 20, 50</strong>.<br>Pozor: Ak by nasledoval ƒèal≈°√≠ <code>rollback to s1</code> po commite, vyhod√≠ to <strong>ERROR</strong>, preto≈æe commit zma≈æe v≈°etky savepointy." },
            { id: 95, q: "Ak√Ω v√Ωsledok?<br><pre>for i in 1..5 loop\n insert (i);\n if mod(i,2) = 1 then commit;\n else rollback; end if;\nend loop;</pre>", a: "<strong>1, 3, 5</strong><br>i=1 (odd) -> commit (1 ulo≈æen√©).<br>i=2 (even) -> insert 2, rollback (2 zru≈°en√©, 1 ost√°va).<br>i=3 (odd) -> insert 3, commit (1, 3 ulo≈æen√©).<br>i=4 -> insert 4, rollback (4 zru≈°en√©).<br>i=5 -> commit." },
            { id: 96, q: "Proced√∫ry a transakcie.<br><pre>Proc1: Loop 1..5, Insert, Commit.<br>Proc2: Proc1, Rollback, Insert 100.<br>Exec Proc2; Commit;</pre>", a: "Count: <strong>6</strong><br>Proc1 m√° commit vo vn√∫tri cyklu. Teda 1..5 sa natrvalo ulo≈æia. Rollback v Proc2 u≈æ neovplyvn√≠ 1..5. Vlo≈æ√≠ sa 100. V√Ωsledok: 1, 2, 3, 4, 5, 100." },
            { id: 97, q: "Proced√∫ry 2.<br><pre>Proc1: Loop 1..5, Insert, EndLoop, Rollback.<br>Proc2: Proc1, Insert 50, Commit.</pre>", a: "Max(id): <strong>50</strong><br>Proc1 vlo≈æ√≠ 1..5, ale na konci m√° <code>ROLLBACK</code>. V≈°etko z Proc1 sa zru≈°√≠. Potom Proc2 vlo≈æ√≠ 50." },
            { id: 98, q: "Autonomous Transaction.<br><pre>Proc1: PRAGMA AUTONOMOUS... Insert 1, 2, Commit.<br>Proc2: Proc1, Rollback, Insert 10.<br>Exec Proc2;</pre>", a: "Count: <strong>3</strong> (Hodnoty: 1, 2, 10)<br>Proc1 je auton√≥mna - jej commit je nez√°visl√Ω. 1 a 2 sa ulo≈æia. Rollback v Proc2 zru≈°√≠ len veci v Proc2 (ƒço tam zatiaƒæ niƒç nie je). Potom vlo≈æ√≠ 10." },
            { id: 99, q: "Savepoint v cykle.<br><pre>Loop 1..5, Insert (i). If i=3 then Savepoint sp. EndLoop.<br>Rollback to sp; Commit;</pre>", a: "<strong>1, 2, 3</strong><br>Vlo≈æ√≠ 1, 2, 3 (SP), 4, 5. Rollback to SP vr√°ti stav na 3. 4 a 5 sa zru≈°ia." },
            { id: 100, q: "Vnoren√© volania.<br><pre>Proc1: Ins(5), Rollback, Ins(10), Commit.<br>Proc2: Proc1, Rollback, Ins(20), Commit.</pre>", a: "Count: <strong>2</strong> (Hodnoty: 10, 20)<br>Proc1: 5 zru≈°√≠, 10 commitne. <br>Sp√§≈• v Proc2: Rollback zru≈°√≠ len to, ƒço nebolo commitnut√© (ale 10 u≈æ je commitnut√° v Proc1). Potom vlo≈æ√≠ 20." },
            { id: 101, q: "Auton√≥mna s Rollbackom.<br><pre>Proc1: Auton√≥mna. Loop 1..3 Ins(i). Rollback.<br>Proc2: Proc1, Ins(99), Commit.</pre>", a: "Count: <strong>1</strong> (Hodnota: 99)<br>Proc1 vlo≈æ√≠ 1, 2, 3 ale urob√≠ Rollback (v r√°mci svojej auton√≥mnej transakcie). Tak≈æe z Proc1 neostane niƒç. Proc2 vlo≈æ√≠ 99." },

            // --- Z√ÅPOƒåET 2 START (102-136) ---
            
            // --- GENEROVANIE SQL (102-105) ---
            { id: 102, q: "Nap√≠≈°te SELECT, ktor√Ω pomocou syst√©mov√Ωch metad√°t vygeneruje pr√≠kazy <code>DROP TABLE</code> pre v≈°etky tabuƒæky v aktu√°lnej sch√©me, ktor√© v n√°zve obsahuj√∫ 'ZALOHA'.", a: "<pre>SELECT 'DROP TABLE ' || table_name || ';'\nFROM tabs\nWHERE table_name LIKE '%ZALOHA%';</pre>" },
            { id: 103, q: "Pomocou SQL vygenerujte pr√≠kazy na zru≈°enie linuxov√©ho konta (<code>userdel login</code>) pre zamestnancov, ktor√≠ ukonƒçili pomer v poslednom mesiaci (login = rodn√© ƒç√≠slo).", a: "<pre>SELECT 'userdel ' || rod_cislo\nFROM p_zamestnanec\nWHERE dat_do >= ADD_MONTHS(SYSDATE, -1);</pre>" },
            { id: 104, q: "Nap√≠≈°te SELECT, ktor√Ω vygeneruje pr√≠kazy <code>GRANT SELECT</code> pre v≈°etky tabuƒæky pou≈æ√≠vateƒæovi 'STUDENT'.", a: "<pre>SELECT 'GRANT SELECT ON ' || table_name || ' TO student;'\nFROM tabs;</pre>" },
            { id: 105, q: "Vygenerujte pr√≠kazy <code>CREATE SEQUENCE</code> (tvar: seq_tabulka_stlpec) pre v≈°etky stƒ∫pce v sch√©me, ktor√© zaƒç√≠naj√∫ na 'ID_' a s√∫ typu NUMBER.", a: "<pre>SELECT 'CREATE SEQUENCE seq_' || table_name || \n       '_' || column_name || ';'\nFROM user_tab_columns\nWHERE column_name LIKE 'ID_%'\n  AND data_type = 'NUMBER';</pre>" },
            
            // --- KOLEKCIE (106-109) ---
            { id: 106, q: "M√°me definovan√© VARRAY pole o veƒækosti 4: <code>type t_pole IS VARRAY(4) OF integer;</code><br>ƒåo sa stane po pr√≠kaze <code>pole.delete(4);</code>?", a: "Nastane <strong>CHYBA</strong>.<br>Met√≥da <code>DELETE(n)</code> (s parametrom) nie je povolen√° pre VARRAY. Pre VARRAY je mo≈æn√© pou≈æi≈• len <code>DELETE</code> (bez parametra - zma≈æe v≈°etko) alebo <code>TRIM(n)</code> na skr√°tenie z konca." },
            { id: 107, q: "Ako spr√°vne iterova≈• cez <strong>Nested Table</strong>, v ktorej vznikli 'diery' po vymazan√≠ prvkov (napr. delete(2))?", a: "<pre>idx := pole.FIRST;\nWHILE idx IS NOT NULL LOOP\n  dbms_output.put_line(pole(idx));\n  idx := pole.NEXT(idx);\nEND LOOP;</pre><br>Iter√°cia cez <code>1..pole.count</code> by zlyhala na neexistuj√∫com indexe." },
            { id: 108, q: "Zadeklarujte typ pre <strong>asociat√≠vne pole</strong> (mapu), kde kƒæ√∫ƒçom je rodn√© ƒç√≠slo (string) a hodnotou poƒçet poisten√≠ (number).", a: "<pre>TYPE t_map IS TABLE OF NUMBER \nINDEX BY VARCHAR2(11);</pre>" },
            { id: 109, q: "Ktor√© tvrdenie o kolekci√°ch je <strong>nepravdiv√©</strong>?<br>A) VARRAY m√° limitovan√∫ veƒækos≈•.<br>B) Nested Table m√¥≈æe ma≈• diery v indexoch.<br>C) Iter√°cia <code>FOR i IN 1..COUNT</code> je bezpeƒçn√° pre Nested Table po DELETE.<br>D) Asociat√≠vne pole podporuje textov√© kƒæ√∫ƒçe.", a: "<strong>C) je nepravdiv√©.</strong><br>Po DELETE vznikn√∫ v Nested Table diery a pr√≠stup cez index v cykle 1..COUNT vyhod√≠ <code>NO_DATA_FOUND</code>." },

            // --- KURZORY (110-114) ---
            { id: 110, q: "Nap√≠≈°te syntax kurzora, ktor√Ω zamkne vybran√© riadky pre neskor≈°iu aktualiz√°ciu stƒ∫pca <code>oslobodeny</code>.", a: "<pre>CURSOR cur_poistenci IS\n  SELECT * FROM p_poistenie\n  WHERE ...\n  FOR UPDATE OF oslobodeny;</pre>" },
            { id: 111, q: "Ako v cykle aktualizova≈• pr√°ve spracov√°van√Ω riadok kurzora (definovan√©ho s FOR UPDATE)?", a: "<pre>UPDATE p_poistenie\nSET oslobodeny = 'A'\nWHERE CURRENT OF cur_poistenci;</pre>" },
            { id: 112, q: "Definujte <strong>parametrizovan√Ω kurzor</strong>, ktor√Ω vyberie okresy pre konkr√©tny kraj (parameter p_id_kraja).", a: "<pre>CURSOR cur_okresy(p_id_kraja INTEGER) IS\n  SELECT * FROM p_okres\n  WHERE id_kraja = p_id_kraja;</pre>" },
            { id: 113, q: "Ak√Ω je rozdiel medzi implicitn√Ωm (FOR rec IN select) a explicitn√Ωm (OPEN-FETCH-CLOSE) kurzorom?", a: "<strong>Implicitn√Ω:</strong> Krat≈°√≠ z√°pis, Oracle automaticky otv√°ra, fetchuje a zatv√°ra kurzor. <br><strong>Explicitn√Ω:</strong> V√§ƒç≈°ia kontrola nad procesom (napr. fetch po jednom, bulk collect), nutnos≈• manu√°lneho zatvorenia." },
            { id: 114, q: "M√°me kurzor <code>cur_poistenie</code>. Nap√≠≈°te k√≥d, ktor√Ω spoƒç√≠ta riadky prech√°dzan√© t√Ωmto kurzorom (Explicitn√Ω pr√≠stup).", a: "<pre>OPEN cur_poistenie;\nLOOP\n  FETCH cur_poistenie INTO v_rec;\n  EXIT WHEN cur_poistenie%NOTFOUND;\n  v_pocet := v_pocet + 1;\nEND LOOP;\nCLOSE cur_poistenie;</pre>" },

            // --- OBJEKTY (115-118) ---
            { id: 115, q: "Ak√Ω je rozdiel medzi <strong>MAP</strong> a <strong>ORDER</strong> met√≥dou pri trieden√≠ objektov?", a: "<strong>MAP:</strong> Transformuje objekt na skal√°rnu hodnotu (napr. ƒç√≠slo, string), podƒæa ktorej sa triedi. R√Ωchlej≈°ie, umo≈æ≈àuje hashovanie.<br><strong>ORDER:</strong> Porovn√°va dva objekty (self vs other) a vracia -1, 0, 1. Flexibilnej≈°ie, ale pomal≈°ie." },
            { id: 116, q: "Dopl≈àte telo MAP funkcie pre objekt <code>t_poistenie</code>, ak chceme triedi≈• prim√°rne podƒæa <code>id_platitela</code> a sekund√°rne podƒæa <code>dat_od</code> (YYYYMMDD).", a: "<pre>MAP MEMBER FUNCTION tried RETURN VARCHAR2 IS\nBEGIN\n  RETURN id_platitela || '|' || \n         TO_CHAR(dat_od,'YYYYMMDD');\nEND;</pre>" },
            { id: 117, q: "Nap√≠≈°te logiku ORDER funkcie, ktor√° porovn√°va podƒæa priezviska. Ak s√∫ rovnak√©, porovn√° podƒæa mena.", a: "<pre>IF priezvisko < other.priezvisko THEN RETURN -1;\nELSIF priezvisko > other.priezvisko THEN RETURN 1;\nEND IF;\n\n-- rovnak√© priezvisko, sk√∫s meno\nIF meno < other.meno THEN RETURN -1;\nELSIF meno > other.meno THEN RETURN 1;\nEND IF;\n\nRETURN 0;</pre>" },
            { id: 118, q: "M√°me objekt <code>t_poberatel</code>. Chceme, aby pri trieden√≠ boli z√°znamy s <code>dat_do IS NULL</code> (akt√≠vne) a≈æ na konci. Ako to zap√≠sa≈• v ORDER met√≥de?", a: "<pre>-- Self je NULL, Other je NOT NULL -> Self je v√§ƒç≈°√≠\nIF dat_do IS NULL AND other.dat_do IS NOT NULL \n  THEN RETURN 1;\nELSIF dat_do IS NOT NULL AND other.dat_do IS NULL \n  THEN RETURN -1;\nEND IF;\n...</pre>" },

            // --- XML GENERATION (119-123) ---
            { id: 119, q: "Vytvorte XML element <code>&lt;Clovek&gt;Meno Priezvisko&lt;/Clovek&gt;</code> pre ka≈æd√∫ osobu. V≈°etky osoby obaƒæte do kore≈àov√©ho <code>&lt;Osoby&gt;</code>.", a: "<pre>SELECT XMLROOT(\n  XMLELEMENT(\"Osoby\",\n    XMLAGG(\n      XMLELEMENT(\"Clovek\", meno || ' ' || priezvisko)\n    )\n  ), VERSION NO VALUE\n) FROM p_osoba;</pre>" },
            { id: 120, q: "Ak√Ω je rozdiel medzi <code>XMLELEMENT</code> a <code>XMLFOREST</code>?", a: "<strong>XMLELEMENT:</strong> Vytvor√≠ jeden element s konkr√©tnym n√°zvom (m√¥≈æe obsahova≈• atrib√∫ty).<br><strong>XMLFOREST:</strong> Vytvor√≠ 'les' elementov pre ka≈æd√Ω stƒ∫pec v zozname (n√°zov elementu = n√°zov stƒ∫pca/alias), automaticky vynech√°va NULL hodnoty." },
            { id: 121, q: "Ako prid√°me atrib√∫t do XML elementu? Napr. <code>&lt;Mesto nazov='Nitra'&gt;...&lt;/Mesto&gt;</code>.", a: "<pre>XMLELEMENT(\"Mesto\",\n  XMLATTRIBUTES(n_mesta AS \"nazov\"),\n  ... obsah elementu ...\n)</pre>" },
            { id: 122, q: "Vytvorte ≈°trukt√∫ru XML: Kraj -> zoznam Okresov (elementy <code>&lt;okres&gt;</code>).", a: "<pre>SELECT XMLELEMENT(\"Kraj\",\n  XMLATTRIBUTES(n_kraja AS \"nazov\"),\n  (SELECT XMLAGG(XMLELEMENT(\"okres\", n_okresu))\n   FROM p_okres o \n   WHERE o.id_kraja = k.id_kraja)\n) FROM p_kraj k;</pre>" },
            { id: 123, q: "Ako zabezpeƒç√≠me, aby boli elementy v <code>XMLAGG</code> zoraden√© podƒæa abecedy?", a: "<pre>XMLAGG(\n  XMLELEMENT(\"clovek\", meno)\n  ORDER BY meno ASC\n)</pre>" },

            // --- TRIGGRE (124-126) - AI GENERATED ---
            { id: 124, q: "Vysvetlite rozdiel medzi <code>Statement Level</code> a <code>Row Level</code> triggerom. Kedy sa ktor√Ω spust√≠?", a: "<div class='ai-generated'>‚ö†Ô∏è Doplnen√© pre √∫plnos≈• t√©my</div><strong>Row Level (FOR EACH ROW):</strong> Spust√≠ sa pre ka≈æd√Ω jeden zmenen√Ω riadok (napr. pri UPDATE 10 riadkov sa spust√≠ 10x). M√° pr√≠stup k <code>:OLD</code> a <code>:NEW</code>.<br><strong>Statement Level:</strong> Spust√≠ sa len raz pre cel√Ω pr√≠kaz (nez√°visle od poƒçtu riadkov)."},
            { id: 125, q: "ƒåo je to chyba <strong>Mutating Table</strong> v kontexte triggerov?", a: "<div class='ai-generated'>‚ö†Ô∏è Doplnen√© pre √∫plnos≈• t√©my</div>Nastane, ak sa Row Level trigger pok√∫si ƒç√≠ta≈• alebo meni≈• tabuƒæku, nad ktorou bol pr√°ve spusten√Ω (a ktor√° sa pr√°ve men√≠).<br>Rie≈°enie: Pou≈æi≈• <code>COMPOUND TRIGGER</code> alebo doƒçasn√© tabuƒæky / package variables."},
            { id: 126, q: "M√°me trigger <code>BEFORE INSERT OR UPDATE</code>. Ako v tele triggera rozl√≠≈°ime, ƒçi ide o vkladanie alebo √∫pravu?", a: "<div class='ai-generated'>‚ö†Ô∏è Doplnen√© pre √∫plnos≈• t√©my</div>Pou≈æit√≠m podmienen√Ωch predik√°tov:<br><pre>IF INSERTING THEN ...\nELSIF UPDATING THEN ...\nELSIF DELETING THEN ...\nEND IF;</pre>"},

            // --- ANALYTIKA A JOINS (127-136) ---
            { id: 127, q: "Zistite pre ka≈æd√© mesto TOP 3 poistencov podƒæa zaplatenej sumy. Pou≈æite analytick√∫ funkciu.", a: "<pre>SELECT * FROM (\n  SELECT n_mesta, meno, \n    DENSE_RANK() OVER (PARTITION BY n_mesta \n                       ORDER BY sum(suma) DESC) rnk\n  FROM ... JOIN ...\n  GROUP BY n_mesta, meno\n) WHERE rnk <= 3;</pre>" },
            { id: 128, q: "Ako vyp√≠sa≈• zoznam zamestnancov pre ka≈æd√©ho zamestn√°vateƒæa do jedn√©ho riadku oddelen√Ωch ƒçiarkou? (String Aggregation)", a: "<pre>SELECT nazov_firmy, \n  LISTAGG(priezvisko, ', ') \n  WITHIN GROUP (ORDER BY priezvisko)\nFROM ...\nGROUP BY nazov_firmy;</pre>" },
            { id: 129, q: "Vyp√≠≈°te men√° os√¥b, ktor√© s√∫ v tabuƒæke <code>p_zamestnanec</code> A Z√ÅROVE≈á v tabuƒæke <code>p_poistenie</code>. (Pou≈æite EXISTS)", a: "<pre>SELECT meno FROM p_osoba o\nWHERE EXISTS \n  (SELECT 1 FROM p_zamestnanec z \n   WHERE z.rod_cislo = o.rod_cislo)\nAND EXISTS \n  (SELECT 1 FROM p_poistenie p \n   WHERE p.rod_cislo = o.rod_cislo);</pre>" },
            { id: 130, q: "Vyp√≠≈°te mest√°, v ktor√Ωch NE≈ΩIJE ≈æiadna osoba so 'Zrakov√Ωm postihnut√≠m'.", a: "<pre>SELECT n_mesta FROM p_mesto m\nWHERE NOT EXISTS (\n  SELECT 1 FROM p_osoba o\n  JOIN p_ztp z USING(rod_cislo)\n  JOIN p_typ_postihnutia t USING(id_postihnutia)\n  WHERE o.psc = m.psc \n  AND t.nazov_postihnutia = 'Zrakove...'\n);</pre>" },
            { id: 131, q: "Vyp√≠≈°te poistencov, ktor√≠ NEMAJ√ö ≈æiadnu platbu v tabuƒæke <code>p_odvod_platba</code>. (Pou≈æite IN/NOT IN)", a: "<pre>SELECT * FROM p_poistenie\nWHERE id_poistenca NOT IN \n  (SELECT id_poistenca FROM p_odvod_platba\n   WHERE id_poistenca IS NOT NULL);</pre><br><i>Pozor:</i> Ak by poddotaz vr√°til NULL, cel√Ω v√Ωsledok by bol pr√°zdny." },
            { id: 132, q: "Vytvorte XML report zamestn√°vateƒæov a ich platieb (≈°trukt√∫ra: zamestnavatel -> poistenec -> platby).", a: "<pre>XMLELEMENT(\"zamestnavatelia\",\n XMLAGG(\n  XMLELEMENT(\"fa\", XMLATTRIBUTES(nazov),\n   XMLELEMENT(\"poistenec\", ...\n    XMLAGG(XMLELEMENT(\"platba\", suma))\n   )\n  )\n ) \n)</pre>" },
            { id: 133, q: "Vygenerujte pr√≠kazy na vypnutie (DISABLE) v≈°etk√Ωch triggerov v sch√©me.", a: "<pre>SELECT 'ALTER TRIGGER ' || trigger_name || ' DISABLE;'\nFROM user_triggers;</pre>" },
            { id: 134, q: "Vyp√≠≈°te pre ka≈æd√Ω kraj priemern√Ω poƒçet poistencov v jeho okresoch.", a: "<pre>SELECT n_kraja, AVG(cnt)\nFROM (\n  SELECT id_kraja, COUNT(id_poistenca) as cnt\n  FROM p_okres \n  JOIN p_mesto USING(id_okresu)\n  JOIN p_osoba USING(psc)\n  JOIN p_poistenie USING(rod_cislo)\n  GROUP BY id_kraja\n) JOIN p_kraj USING(id_kraja)\nGROUP BY n_kraja;</pre>" },
            { id: 135, q: "Pomocou <code>DENSE_RANK</code> vypoƒç√≠tajte poradie poistencov v r√°mci mesta podƒæa sumy platieb.", a: "<pre>DENSE_RANK() OVER (\n  PARTITION BY n_mesta\n  ORDER BY SUM(suma) DESC\n)</pre>" },
            { id: 136, q: "ƒåo urob√≠ pr√≠kaz <code>pole.delete</code> bez parametrov nad Nested Table?", a: "Zma≈æe <strong>v≈°etky</strong> prvky v kolekcii a uvoƒæn√≠ pam√§≈•.<br>(Na rozdiel od delete(n), ktor√© zma≈æe len jeden prvok a nech√° 'dieru')." },
            // --- NOV√â OT√ÅZKY Z√ÅPOƒåET 2 (DOPLNENIE) ---

            // --- AGREG√ÅCIE A JOINS (137-140) ---
            { id: 137, q: "Nap√≠≈°te dotaz pre v√Ωpis platiteƒæov a poƒçtu ich poistencov. Zoraƒète v√Ωsledky zostupne podƒæa poƒçtu poistencov.", a: "<pre>SELECT id_platitela, COUNT(id_poistenca) as pocet\nFROM p_platitel\nLEFT JOIN p_poistenie USING(id_platitela)\nGROUP BY id_platitela\nORDER BY COUNT(id_poistenca) DESC;</pre>" },
            { id: 138, q: "Zistite poƒçet obyvateƒæov v ka≈ædom meste (podƒæa PSƒå). Vyp√≠≈°te PSƒå, N√°zov mesta a poƒçet (podƒæa rodn√©ho ƒç√≠sla).", a: "<pre>SELECT psc, n_mesta, COUNT(rod_cislo) as pocet\nFROM p_mesto\nLEFT JOIN p_osoba USING(psc)\nGROUP BY psc, n_mesta\nORDER BY pocet DESC;</pre>" },
            { id: 139, q: "Vyp√≠≈°te osoby (meno, priezvisko, r.ƒç.), ktor√© maj√∫ aspo≈à jedno poistenie. Pou≈æite oper√°tor <code>EXISTS</code>.", a: "<pre>SELECT rod_cislo, meno, priezvisko \nFROM p_osoba po\nWHERE EXISTS(\n  SELECT 'x' FROM p_poistenie pp\n  WHERE po.rod_cislo = pp.rod_cislo\n);</pre>" },
            { id: 140, q: "Vyp√≠≈°te osoby (meno, priezvisko, r.ƒç.), ktor√© maj√∫ poistenie. Pou≈æite oper√°tor <code>IN</code>.", a: "<pre>SELECT meno, priezvisko, rod_cislo \nFROM p_osoba\nWHERE rod_cislo IN \n  (SELECT rod_cislo FROM p_poistenie);</pre>" },

            // --- POHƒΩADY (VIEWS) (141-149) ---
            { id: 141, q: "Vytvorte pohƒæad <code>zobrazPoistenia</code>, ktor√Ω bude obsahova≈• ID poistenca, rodn√© ƒç√≠slo, meno a priezvisko (v≈°etky osoby, aj tie bez poistenia).", a: "<pre>CREATE OR REPLACE VIEW zobrazPoistenia AS\nSELECT id_poistenca, rod_cislo, meno, priezvisko \nFROM p_osoba\nLEFT JOIN p_poistenie USING(rod_cislo);</pre>" },
            { id: 142, q: "Vytvorte pohƒæad <code>ZamestnanciAZamestnavatelia</code>, ktor√Ω zobraz√≠ rodn√© ƒç√≠slo zamestnanca, n√°zov zamestn√°vateƒæa a d√°tum n√°stupu.", a: "<pre>CREATE OR REPLACE VIEW ZamestnanciAZamestnavatelia AS\nSELECT pz.rod_cislo AS zamestnanec, \n       z.nazov AS zamestnavatel, \n       pz.dat_od\nFROM p_zamestnanec pz\nJOIN p_zamestnavatel z \n  ON pz.id_zamestnavatela = z.ico;</pre>" },
            { id: 143, q: "Vytvorte pohƒæad <code>poistenci_a_odvody</code>, ktor√Ω zobraz√≠ ID poistenca, rodn√© ƒç√≠slo a poƒçet jeho odvodov√Ωch platieb.", a: "<pre>CREATE OR REPLACE VIEW poistenci_a_odvody AS\nSELECT id_poistenca, rod_cislo, \n       COUNT(cis_platby) pocet_odvodov\nFROM p_poistenie\nLEFT JOIN p_odvod_platba USING (id_poistenca)\nGROUP BY id_poistenca, rod_cislo;</pre>" },
            { id: 144, q: "Vytvorte pohƒæad <code>osoby_typ_postihnutia</code>. Pre ka≈æd√∫ osobu vyp√≠≈°te zoznam jej postihnut√≠ (n√°zov a d√°tum do) oddelen√Ω medzerou do jedn√©ho re≈•azca.", a: "<pre>CREATE OR REPLACE VIEW osoby_typ_poistenia AS\nSELECT meno, priezvisko,\n LISTAGG(nazov_postihnutia || ' - ' || dat_do || ' ')\n WITHIN GROUP (ORDER BY meno, priezvisko) \n AS postihnutia\nFROM p_osoba\n LEFT JOIN p_ztp USING (rod_cislo)\n LEFT JOIN p_typ_postihnutia USING (id_postihnutia)\nGROUP BY meno, priezvisko, rod_cislo;</pre>" },
            { id: 145, q: "Vytvorte pohƒæad <code>pocetZamestnancov</code>, ktor√Ω zobraz√≠ n√°zov zamestn√°vateƒæa a poƒçet jeho AKT√çVNYCH zamestnancov (dat_do je null).", a: "<pre>CREATE OR REPLACE VIEW pocetZamestnancov AS\nSELECT nazov, COUNT(rod_cislo)\nFROM p_zamestnavatel zam\nLEFT JOIN p_zamestnanec pz \n  ON(zam.ico = pz.id_zamestnavatela \n     AND pz.dat_do IS NULL)\nGROUP BY nazov;</pre>" },
            { id: 146, q: "Vytvorte pohƒæad <code>poistenci_a_zamestnanci</code> pre osoby, ktor√© s√∫ v tabuƒæke zamestnancov A Z√ÅROVE≈á v tabuƒæke poistencov (pou≈æite IN).", a: "<pre>CREATE OR REPLACE VIEW poistenci_a_zamestnanci AS\nSELECT meno, priezvisko, rod_cislo \nFROM p_osoba\nWHERE rod_cislo IN \n  (SELECT rod_cislo FROM p_zamestnanec)\nAND rod_cislo IN \n  (SELECT rod_cislo FROM p_poistenie);</pre>" },
            { id: 147, q: "Vytvorte pohƒæad <code>pocetPoberatelov</code>, ktor√Ω zobraz√≠ ID typu, popis pr√≠spevku a poƒçet unik√°tnych os√¥b, ktor√© ho poberaj√∫.", a: "<pre>CREATE OR REPLACE VIEW pocetPoberatelov AS\nSELECT id_typu, popis, \n       COUNT(DISTINCT rod_cislo)\nFROM p_typ_prispevku\nLEFT JOIN p_poberatel USING (id_typu)\nGROUP BY id_typu, popis;</pre>" },
            { id: 148, q: "Vytvorte pohƒæad <code>poistenci_posledna_platba</code>, ktor√Ω zobraz√≠ meno, priezvisko, ID a d√°tum poslednej (MAX) platby poistenca.", a: "<pre>CREATE OR REPLACE VIEW poistenci_posledna_platba AS\nSELECT meno, priezvisko, rod_cislo, \n       id_poistenca, MAX(dat_platby)\nFROM p_odvod_platba\nJOIN p_poistenie USING(id_poistenca)\nJOIN p_osoba USING (rod_cislo)\nGROUP BY meno, priezvisko, \n         id_poistenca, rod_cislo;</pre>" },
            { id: 149, q: "Vytvorte pohƒæad <code>osoby_a_ich_prispevky</code>, ktor√Ω zobraz√≠ meno, poƒçet pr√≠spevkov a zoznam n√°zvov pr√≠spevkov (LISTAGG).", a: "<pre>CREATE OR REPLACE VIEW osoby_a_ich_prispevky AS\nSELECT meno, priezvisko, po.rod_cislo, \n COUNT(*) pocet,\n LISTAGG(popis, ', ') \n WITHIN GROUP (ORDER BY popis) as prispevky\nFROM p_osoba po\nJOIN p_poberatel pp ON (po.rod_cislo = pp.rod_cislo)\nJOIN p_prispevky ppr USING(id_poberatela)\nJOIN p_typ_prispevku pt USING (id_typu)\nGROUP BY meno, priezvisko, po.rod_cislo;</pre>" },

            // --- POKROƒåIL√â SELECTY (150-153) ---
            { id: 150, q: "N√°jdite osobu s najvy≈°≈°√≠m poƒçtom odvodov√Ωch platieb. Pou≈æite <code>FETCH FIRST 1 ROWS WITH TIES</code>.", a: "<pre>SELECT meno, priezvisko, COUNT(cis_platby)\nFROM p_osoba\nJOIN p_poistenie USING(rod_cislo)\nJOIN p_odvod_platba USING(id_poistenca)\nGROUP BY meno, priezvisko, rod_cislo\nORDER BY COUNT(cis_platby) DESC\nFETCH FIRST 1 ROWS WITH TIES;</pre>" },
            { id: 151, q: "Vyp√≠≈°te typy pr√≠spevkov (ID, popis), ktor√© boli pou≈æit√© aspo≈à 3-kr√°t (filtrovanie v <code>HAVING</code>).", a: "<pre>SELECT id_typu, popis FROM p_typ_prispevku\nWHERE id_typu IN (\n  SELECT id_typu\n  FROM p_prispevky\n  GROUP BY id_typu\n  HAVING COUNT(*) >= 3\n);</pre>" },
            { id: 152, q: "Vyp√≠≈°te poistencov, ktor√≠ maj√∫ aspo≈à dve z√°znamy v tabuƒæke <code>p_odvod_platba</code>. Pou≈æite <code>EXISTS</code>.", a: "<pre>SELECT id_poistenca, meno, priezvisko \nFROM p_poistenie pp\nJOIN p_osoba USING(rod_cislo)\nWHERE EXISTS(\n  SELECT 'x' FROM p_odvod_platba po\n  WHERE pp.id_poistenca = po.id_poistenca\n  GROUP BY po.id_poistenca\n  HAVING COUNT(cis_platby) > 1\n);</pre>" },
            { id: 153, q: "Vyp√≠≈°te poƒçet r√¥znych zamestn√°vateƒæov (unik√°tne IƒåO) pre ka≈æd√© PSƒå.", a: "<pre>SELECT psc, COUNT(DISTINCT ico)\nFROM p_zamestnavatel\nGROUP BY psc;</pre>" },

            // --- TRIGGRE A FUNKCIE (154-162) ---
            { id: 154, q: "Vytvorte trigger <code>nastavDatumDo</code>, ktor√Ω pri vkladan√≠ nov√©ho zamestnanca automaticky nastav√≠ <code>dat_do</code> na NULL.", a: "<pre>CREATE OR REPLACE TRIGGER nastavDatumDo\nBEFORE INSERT ON p_zamestnanec\nFOR EACH ROW\nBEGIN\n  :new.dat_do := NULL;\nEND;</pre>" },
            { id: 155, q: "Vytvorte funkciu <code>Pocet_rokov_prispevkov</code>, ktor√° pre dan√© rodn√© ƒç√≠slo vr√°ti poƒçet r√¥znych rokov (EXTRACT YEAR), v ktor√Ωch osoba dostala pr√≠spevok.", a: "<pre>CREATE OR REPLACE FUNCTION Pocet_rokov_prispevkov \n(rod IN CHAR) RETURN NUMBER IS \n pocet NUMBER;\nBEGIN\n SELECT COUNT(DISTINCT EXTRACT(YEAR FROM kedy))\n INTO pocet\n FROM p_prispevky\n JOIN p_poberatel USING(id_poberatela) \n WHERE rod_cislo = rod;\n RETURN (pocet);\nEND;</pre>" },
            { id: 156, q: "Vytvorte funkciu <code>Vek_osoby</code>, ktor√° vypoƒç√≠ta vek z rodn√©ho ƒç√≠sla (form√°t RRMMDD, ≈æeny maj√∫ MM+50).", a: "<pre>CREATE OR REPLACE FUNCTION Vek_osoby (rod IN CHAR)\nRETURN NUMBER IS vek NUMBER;\nBEGIN\n SELECT TRUNC(MONTHS_BETWEEN(\n  TO_DATE(SUBSTR(rod,1,2) || \n          MOD(SUBSTR(rod,3,2),50) || \n          SUBSTR(rod, 5,2), 'RRMMDD'),\n  SYSDATE) / -12) -- alebo opacne sysdate, datum\n INTO vek\n FROM dual; -- zjednodusene bez select from osoba\n RETURN vek;\nEND;</pre>" },
            { id: 157, q: "Vytvorte funkciu <code>maAsponJedenPrispevok</code>, ktor√° vr√°ti 1 ak osoba poberala pr√≠spevok, inak 0.", a: "<pre>CREATE OR REPLACE FUNCTION maAsponJedenPrispevok\n(p_rod_cislo IN CHAR) RETURN NUMBER IS \n v_existuje NUMBER;\nBEGIN\n SELECT CASE WHEN EXISTS(\n   SELECT 'x' FROM p_poberatel \n   JOIN p_prispevky USING(id_poberatela)\n   WHERE rod_cislo = p_rod_cislo) \n THEN 1 ELSE 0 END\n INTO v_existuje FROM dual;\n RETURN v_existuje;\nEND;</pre>" },
            { id: 158, q: "Vytvorte funkciu <code>zijeVNitrianskom</code>, ktor√° vr√°ti 1, ak osoba podƒæa PSƒå b√Ωva v kraji zaƒç√≠naj√∫com na 'Nitr%'.", a: "<pre>CREATE OR REPLACE FUNCTION zijeVNitrianskom\n(p_rc IN CHAR) RETURN NUMBER IS v_res NUMBER;\nBEGIN\n SELECT COUNT(*) INTO v_res FROM p_osoba\n JOIN p_mesto USING(psc)\n JOIN p_okres USING(id_okresu)\n JOIN p_kraj USING(id_kraja)\n WHERE n_kraja LIKE 'Nitr%'\n AND rod_cislo = p_rc;\n RETURN CASE WHEN v_res > 0 THEN 1 ELSE 0 END;\nEND;</pre>" },
            { id: 159, q: "Vytvorte funkciu <code>f_getPocetZamestnavatelov</code>, ktor√° vr√°ti poƒçet r√¥znych zamestn√°vateƒæov danej osoby.", a: "<pre>CREATE OR REPLACE FUNCTION f_getPocetZamestnavatelov\n(p_rc IN CHAR) RETURN NUMBER IS v_pocet NUMBER;\nBEGIN\n SELECT COUNT(DISTINCT id_zamestnavatela) \n INTO v_pocet \n FROM p_zamestnanec\n WHERE rod_cislo = p_rc;\n RETURN v_pocet;\nEND;</pre>" },
            { id: 160, q: "Vytvorte proced√∫ru <code>vypisInfoOsoba</code>, ktor√° pomocou kurzora vyp√≠≈°e meno a priezvisko osoby podƒæa rodn√©ho ƒç√≠sla.", a: "<pre>CREATE OR REPLACE PROCEDURE vypisInfoOsoba(p_rc IN CHAR)\nIS CURSOR osoba_cur IS\n SELECT * FROM p_osoba WHERE rod_cislo = p_rc;\n v_osoba osoba_cur%ROWTYPE;\nBEGIN\n OPEN osoba_cur;\n FETCH osoba_cur INTO v_osoba;\n IF osoba_cur%FOUND THEN\n  DBMS_OUTPUT.PUT_LINE(v_osoba.meno);\n END IF;\n CLOSE osoba_cur;\nEND;</pre>" },
            { id: 161, q: "Vytvorte proced√∫ru <code>vypisHistoriuTypu</code>, ktor√° pomocou cyklu prejde z√°znamy v P_HISTORIA pre dan√© ID typu.", a: "<pre>CREATE OR REPLACE PROCEDURE vypisHistoriuTypu(p_id IN NUMBER)\nIS CURSOR hist_cur IS \n SELECT * FROM p_historia \n WHERE id_typu = p_id ORDER BY dat_od;\nBEGIN\n FOR z IN hist_cur LOOP\n  DBMS_OUTPUT.PUT_LINE(z.dat_od || ' ' || z.zakl_vyska);\n END LOOP;\nEND;</pre>" },
            { id: 162, q: "Vytvorte proced√∫ru, ktor√° cez <code>SELECT INTO</code> zist√≠ a vyp√≠≈°e poƒçet os√¥b a poƒçet poistencov v zadanom PSƒå.", a: "<pre>CREATE PROCEDURE pocet_osob_a_poistencov(p_psc IN CHAR)\nIS v_osob NUMBER; v_poist NUMBER;\nBEGIN\n SELECT COUNT(*) INTO v_osob \n FROM p_osoba WHERE psc = p_psc;\n\n SELECT COUNT(DISTINCT rod_cislo) INTO v_poist\n FROM p_osoba JOIN p_poistenie USING(rod_cislo)\n WHERE psc = p_psc;\n\n DBMS_OUTPUT.PUT_LINE(v_osob || ' ' || v_poist);\nEND;</pre>" },

            // --- PR√ÅCA S D√ÅTUMOM A RODN√ùM ƒå√çSLOM (163-171) ---
            { id: 163, q: "Nap√≠≈°te SELECT, ktor√Ω z rodn√©ho ƒç√≠sla (bez lomen√©ho) vypoƒç√≠ta vek osoby (zohƒæadnite +50 pre ≈æeny).", a: "<pre>SELECT meno, TRUNC(MONTHS_BETWEEN(\n TO_DATE(SUBSTR(rod_cislo, 1, 2) || '-' || \n MOD(SUBSTR(rod_cislo,3, 2), 50) || '-' || \n SUBSTR(rod_cislo, 5, 2), 'YY-MM-DD'), \n SYSDATE) / -12) as vek\nFROM p_osoba;</pre>" },
            { id: 164, q: "Vyp√≠≈°te osoby, ktor√© sa narodili v nedeƒæu (pou≈æite form√°t 'd' alebo 'DAY').", a: "<pre>SELECT * FROM p_osoba\nWHERE TO_CHAR(TO_DATE(\n SUBSTR(rod_cislo, 1, 2) || '-' || \n MOD(SUBSTR(rod_cislo, 3, 2), 50) || '-' || \n SUBSTR(rod_cislo, 5, 2), \n 'RR-MM-DD'), 'd') = '7'; -- 7 je nedela v SK locale</pre>" },
            { id: 165, q: "Zistite poƒçet os√¥b, ktor√© sa narodili v priestupn√Ω rok (test na 29. febru√°r).", a: "<pre>SELECT COUNT(*) FROM p_osoba\nWHERE TO_CHAR(TO_DATE(\n SUBSTR(rod_cislo, 1, 2) || '-02-28', \n 'RR-MM-DD') + 1, 'DD') = '29';</pre>" },
            { id: 166, q: "Zistite kvart√°l ('Q'), v ktorom sa narodilo najviac os√¥b.", a: "<pre>SELECT kvartal FROM (\n SELECT TO_CHAR(datum_narodenia, 'Q') as kvartal,\n COUNT(*) pocet FROM (\n   --subselect s prevodom rod_cisla na datum--\n ) GROUP BY TO_CHAR(datum_narodenia, 'Q')\n ORDER BY pocet DESC\n) FETCH FIRST 1 ROWS WITH TIES;</pre>" },
            { id: 167, q: "Vyp√≠≈°te poistencov, ktor√≠ boli poisten√≠ pred dov≈ï≈°en√≠m 18 rokov.", a: "<pre>SELECT * FROM p_osoba\nJOIN p_poistenie pp USING(rod_cislo)\nWHERE ADD_MONTHS( datum_narodenia, 18*12 ) \n      > pp.dat_od;</pre>" },
            { id: 168, q: "Zistite, v ktor√Ω de≈à v t√Ω≈ædni ('DAY') sa narodilo najviac os√¥b.", a: "<pre>SELECT den FROM (\n SELECT TO_CHAR(datum_nar, 'DAY') as den, \n COUNT(*) pocet\n FROM ...\n GROUP BY TO_CHAR(datum_nar, 'DAY')\n ORDER BY pocet DESC\n) FETCH FIRST 1 ROWS WITH TIES;</pre>" },
            { id: 169, q: "Vyp√≠≈°te osoby, ktor√© DNES oslavuj√∫ narodeniny (zhoda d≈àa a mesiaca).", a: "<pre>SELECT * FROM p_osoba\nWHERE EXTRACT(day FROM datum_nar) \n      = EXTRACT(day FROM sysdate)\nAND EXTRACT(month FROM datum_nar) \n      = EXTRACT(month FROM sysdate);</pre>" },
            { id: 170, q: "Vytvorte CHECK, ktor√Ω zabezpeƒç√≠, ≈æe pr√≠spevok mus√≠ ma≈• sumu > 0.", a: "<pre>ALTER TABLE p_prispevky\nADD CONSTRAINT chck_prispevok_suma\nCHECK(suma > 0);</pre>" },
            { id: 171, q: "Vytvorte CHECK, ktor√Ω over√≠, ≈æe d√°tum ukonƒçenia zamestnania je v√§ƒç≈°√≠ ako d√°tum zaƒçiatku (alebo je NULL).", a: "<pre>ALTER TABLE p_zamestnanec\nADD CONSTRAINT chck_ukoncenie\nCHECK(dat_do IS NULL OR dat_do > dat_od);</pre>" }
        ];

        const testCategories = [
            { min: 1, max: 3 },   // DB Link Insert
            { min: 4, max: 6 },   // DB Link Update
            { min: 7, max: 8 },   // Local Insert
            { min: 9, max: 10 },  // DB Link Delete
            { min: 11, max: 13 }, // Index DDL
            { min: 14, max: 19 }, // Index Design
            { min: 20, max: 23 }, // Access Methods
            { min: 24, max: 30 }, // Index Theory
            { min: 31, max: 40 }, // LOB Theory
            { min: 41, max: 49 }, // LOB Packages
            { min: 50, max: 61 }, // JSON
            { min: 62, max: 69 }, // General Theory
            { min: 70, max: 87 }, // Connect By
            { min: 88, max: 101 }, // Transactions
            { min: 102, max: 105 }, // Generovanie SQL
            { min: 106, max: 109 }, // Kolekcie
            { min: 110, max: 114 }, // Kurzory
            { min: 115, max: 118 }, // Objekty
            { min: 119, max: 123 }, // XML
            { min: 124, max: 136 }, // Analytika/Triggre (Doplnen√©)
            // NOV√â KATEG√ìRIE
            { min: 137, max: 140 }, // Agreg√°cie a Joins
            { min: 141, max: 149 }, // Views
            { min: 150, max: 153 }, // Pokroƒçil√© Selecty
            { min: 154, max: 162 }, // Triggre a Funkcie (PDS_2)
            { min: 163, max: 171 }  // Pr√°ca s d√°tumom/Rƒå
        ];

        // --- LOGIC ---
           
        let sessionData = []; // Pole objektov: { qId: 1, status: null/'correct'/'incorrect' }
        let currentSessionIndex = 0; // Kde sa nach√°dzame v poli sessionData
        let currentCard = null;
        let correctCount = 0;
        let incorrectCount = 0;
        let isFlipped = false;
        let currentMode = 'learn'; 

        // UI Elementy
        const mainMenu = document.getElementById('main-menu');
        const gameArea = document.getElementById('game-area');
        const cardElement = document.getElementById('flashcard');
        const qNumEl = document.getElementById('q-num');
        const qTextEl = document.getElementById('q-text');
        const aTextEl = document.getElementById('a-text');
        
        const countRemEl = document.getElementById('count-remaining');
        const countCorEl = document.getElementById('count-correct');
        const countIncEl = document.getElementById('count-incorrect');
        const modeIndicator = document.getElementById('mode-indicator');

        const btnCor = document.getElementById('btn-correct');
        const btnInc = document.getElementById('btn-incorrect');

        // Funkcia na n√°hodn√© premie≈°anie poƒæa
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }

        // Pomocn√° funkcia na rozsah
        function range(start, end) {
            return Array.from({length: end - start + 1}, (_, i) => start + i);
        }

        // --- INITIALIZATION ---

        function initSession(indices, modeName) {
            currentMode = modeName;
            correctCount = 0;
            incorrectCount = 0;
            
            // Vytvor√≠me ≈°trukt√∫ru pre sledovanie stavu
            sessionData = indices.map(qId => ({
                qIndex: qId, // Index v poli 'questions' (nie DB ID)
                status: null 
            }));

            currentSessionIndex = 0;
            setupGameUI(modeName); 
            renderNavGrid();       
            loadCard(0);           
        }

        // --- START FUNCTIONS ---

        function startLearning() {
            // V≈°etky ot√°zky (0 a≈æ length-1)
            const indices = questions.map((_, index) => index);
            initSession(indices, "Re≈æim: V≈°etky karty");
        }

        function startTest() {
            let indices = [];
            testCategories.forEach(cat => {
                const range = cat.max - cat.min + 1;
                const randomId = Math.floor(Math.random() * range) + cat.min;
                // Prevod ID na index poƒæa questions
                const qIndex = questions.findIndex(q => q.id === randomId);
                if(qIndex !== -1) indices.push(qIndex);
            });
            shuffleArray(indices);
            initSession(indices, "Re≈æim: TEST (n√°hodn√© ot√°zky)");
        }

        function startExam() {
            const theoryIds = [
                ...range(24, 49), ...range(62, 69),
                106, 109, 113, 115, 120, 124, 125, 126, 136
            ];
            
            const theoryIndices = [];
            const practicalIndices = [];

            questions.forEach((q, index) => {
                if (theoryIds.includes(q.id)) {
                    theoryIndices.push(index);
                } else {
                    practicalIndices.push(index);
                }
            });

            shuffleArray(theoryIndices);
            shuffleArray(practicalIndices);

            const selectedIndices = [
                ...theoryIndices.slice(0, 20),
                ...practicalIndices.slice(0, 30)
            ];
            
            shuffleArray(selectedIndices);
            initSession(selectedIndices, "Re≈æim: SK√ö≈†KA (50 ot√°zok)");
        }

        // --- UI & GAMEPLAY ---

        function setupGameUI(modeText) {
            modeIndicator.textContent = modeText;
            
            mainMenu.style.display = 'none';
            gameArea.style.display = 'flex';
            document.querySelector('.card-container').style.display = 'block'; 
            document.getElementById('controls').style.display = 'flex';
            document.getElementById('nav-grid').style.display = 'flex'; // Zobrazi≈• mrie≈æku

            // Reset kontajnera ak bol prep√≠san√Ω finish()
            const container = document.querySelector('.card-container');
            if (!container.querySelector('.card')) {
                 location.reload(); // Najjednoduch≈°√≠ reset ak sme u≈æ boli na konci
            }
        }

        function renderNavGrid() {
            const grid = document.getElementById('nav-grid');
            grid.innerHTML = '';

            sessionData.forEach((item, i) => {
                const btn = document.createElement('div');
                btn.className = 'nav-item';
                btn.textContent = i + 1; 
                btn.onclick = () => jumpToQuestion(i);
                btn.id = `nav-item-${i}`;
                grid.appendChild(btn);
            });
            updateNavGridUI();
        }

        function updateNavGridUI() {
            sessionData.forEach((item, i) => {
                const btn = document.getElementById(`nav-item-${i}`);
                if (!btn) return;

                btn.className = 'nav-item'; // Reset

                if (item.status === true) btn.classList.add('correct');
                if (item.status === false) btn.classList.add('incorrect');
                if (i === currentSessionIndex) btn.classList.add('active');
            });
        }

        function jumpToQuestion(index) {
            if (index < 0 || index >= sessionData.length) return;
            currentSessionIndex = index;
            loadCard(index);
        }

        // TOTO JE JEDIN√Å FUNKCIA LOAD CARD
        function loadCard(index) {
            // Kontrola konca
            if (index >= sessionData.length) {
                const allCorrect = sessionData.every(i => i.status === true);
                if (allCorrect) {
                    finish();
                    return;
                } else {
                    // Ak nie je v≈°etko hotov√©, n√°jdi prv√∫ nevyrie≈°en√∫
                    const nextTodo = sessionData.findIndex(i => i.status !== true);
                    if(nextTodo !== -1) {
                        jumpToQuestion(nextTodo);
                        return;
                    } else {
                        finish(); // V≈°etko vyrie≈°en√©
                        return;
                    }
                }
            }

            isFlipped = false;
            cardElement.classList.remove('flipped');
            btnCor.style.display = 'none';
            btnInc.style.display = 'none';

            const dataItem = sessionData[index];
            currentCard = questions[dataItem.qIndex];

            qNumEl.textContent = `${currentCard.id} (Poradie: ${index + 1} / ${sessionData.length})`;
            qTextEl.innerHTML = currentCard.q;
            aTextEl.innerHTML = currentCard.a;

            updateStats();
            updateNavGridUI();
        }

        function updateStats() {
            const done = sessionData.filter(i => i.status !== null).length;
            const corr = sessionData.filter(i => i.status === true).length;
            const incorr = sessionData.filter(i => i.status === false).length;

            countRemEl.textContent = sessionData.length - done;
            countCorEl.textContent = corr;
            countIncEl.textContent = incorr;
        }

        function flipCard() {
            isFlipped = !isFlipped;
            cardElement.classList.toggle('flipped');

            if (isFlipped) {
                btnCor.style.display = 'inline-block';
                btnInc.style.display = 'inline-block';
            } else {
                btnCor.style.display = 'none';
                btnInc.style.display = 'none';
            }
        }

        cardElement.addEventListener('click', (e) => {
            if (window.getSelection().toString().length === 0) {
                 flipCard();
            }
        });

        function handleAnswer(isCorrect) {
            sessionData[currentSessionIndex].status = isCorrect;

            // Len pre vizu√°lnu ≈°tatistiku pokusov
            if (isCorrect) correctCount++;
            else incorrectCount++;

            updateNavGridUI();

            // Auto-advance logic
            let nextIndex = currentSessionIndex + 1;
            
            if (nextIndex >= sessionData.length) {
                // Sk√∫s n√°js≈• prv√∫, ktor√° nie je zelen√°
                nextIndex = sessionData.findIndex(i => i.status !== true);
                if (nextIndex === -1) {
                    finish();
                    return;
                }
            }
            jumpToQuestion(nextIndex);
        }

        function finish() {
            // Opraven√° logika pre finish text
            let finishText = 'V≈°etky karty prejden√©.';
            if (currentMode.includes('TEST')) finishText = 'Test dokonƒçen√Ω.';
            if (currentMode.includes('SK√ö≈†KA')) finishText = 'Sk√∫≈°ka ukonƒçen√°.';

            document.getElementById('nav-grid').style.display = 'none'; // Skry≈• mrie≈æku pri konci

            const container = document.querySelector('.card-container');
            container.innerHTML = `
                <div style="text-align:center; padding: 50px;">
                    <h1 style="color:#2ecc71; font-size: 3rem;">Hotovo!</h1>
                    <p style="font-size:1.2rem;">${finishText}</p>
                    <div style="margin-top: 20px; font-size: 1.1rem;">
                        Celkovo kliknut√≠: ${correctCount + incorrectCount}
                    </div>
                    <button class="btn-menu" onclick="location.reload()">N√°vrat do menu</button>
                </div>
            `;
            
            document.getElementById('controls').style.display = 'none';
            countRemEl.textContent = 0;
        }

        // --- SIDEBAR & MODAL LOGIC ---

        const categoryNames = [
            "DB Link Insert", "DB Link Update", "Local Insert", "DB Link Delete",
            "Index DDL", "Index Design", "Access Methods", "Index Theory",
            "LOB Theory", "LOB Packages", "JSON", "General Theory",
            "Connect By", "Transactions", "Generovanie SQL (Z√°p. 2)",
            "Kolekcie (Z√°p. 2)", "Kurzory (Z√°p. 2)", "Objekty (Z√°p. 2)",
            "XML Generation (Z√°p. 2)", "Analytika/Triggre (Z√°p. 2)",
            "Agreg√°cie a Joins", "Views (Pohƒæady)", "Pokroƒçil√© Selecty",
            "Triggre a Funkcie", "Pr√°ca s d√°tumom/Rƒå"
        ];

        function initSidebar() {
            const sidebar = document.getElementById('sidebar');
            let htmlContent = '';

            testCategories.forEach((cat, index) => {
                const catName = categoryNames[index] || `Kateg√≥ria ${index + 1}`;
                htmlContent += `<div class="sidebar-category">${catName}</div>`;

                for (let i = cat.min; i <= cat.max; i++) {
                    const q = questions.find(q => q.id === i);
                    if (q) {
                        const plainText = q.q.replace(/<[^>]*>?/gm, '');
                        const shortText = plainText.length > 35 ? plainText.substring(0, 35) + '...' : plainText;

                        htmlContent += `
                            <div class="sidebar-item" onclick="openModal(${q.id})">
                                <span class="sidebar-item-id">#${q.id}</span>
                                ${shortText}
                            </div>
                        `;
                    }
                }
            });
            sidebar.innerHTML = htmlContent;
        }

        function toggleSidebar() {
            const sidebar = document.getElementById('sidebar');
            sidebar.classList.toggle('active');
        }

        function openModal(id) {
            const q = questions.find(q => q.id === id);
            if (!q) return;

            document.getElementById('modal-id').textContent = q.id;
            document.getElementById('modal-question').innerHTML = q.q;
            document.getElementById('modal-answer').innerHTML = q.a;

            document.getElementById('modal-overlay').style.display = 'flex';
            // Menu sa nezatv√°ra automaticky
        }

        function closeModal(event) {
            if (event.target.id === 'modal-overlay') {
                document.getElementById('modal-overlay').style.display = 'none';
            }
        }

        function closeModalDirect() {
            document.getElementById('modal-overlay').style.display = 'none';
        }

        // Inicializ√°cia
        initSidebar();
    </script>
</body>
</html>
